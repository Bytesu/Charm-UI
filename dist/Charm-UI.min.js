<<<<<<< HEAD
var foo=1;console.log(foo);var Spinner=React.createClass({displayName:"Spinner",render:function(){return React.createElement("div",{className:"cu-spinner"})}}),Progressbar=React.createClass({displayName:"Progressbar",getInitialState:function(){return{rate:0,done:!1,hide:!1}},getDefaultProps:function(){return{speed:.2,spinner:!0,easing:"ease",startReset:!1,maxRate:.996,incStep:.04,trickle:!0,trickleSpeed:800}},start:function(){this._init(),this.inc()},set:function(t){t=this._format(t),100===t?(this.setState({rate:100}),setTimeout(function(){this.setState({hide:!0}),setTimeout(function(){this.setState({rate:0,done:!0})}.bind(this),2*this.props.speed*1e3)}.bind(this),1e3*this.props.speed)):(this._init(),this.setState({rate:t}))},inc:function(t){var e=this.state.rate;console.log(e),t=this._format(t||this.props.incStep),100!==this.state.rate&&e+t<100*this.props.maxRate&&(e+=t,this.set(e/100),this.props.trickle&&this._autoInc(e))},done:function(){this.set(1)},_format:function(t){return"number"==typeof t?100*t:"string"==typeof t?parseFloat(t):void 0},_autoInc:function(t){setTimeout(function(){100!==this.state.rate&&this.inc((5*Math.random()+1)/100)}.bind(this),this.props.trickleSpeed)},_init:function(){this.setState({done:!1,hide:!1})},render:function(){var t={width:this.state.rate+"%",transition:"width "+this.props.speed+"s "+this.props.easing+" ,opacity "+2*this.props.speed+"s "+this.props.easing},e={display:this.state.done?"none":"block",transition:"opacity "+2*this.props.speed+"s "+this.props.easing,opacity:!this.state.rate||this.state.hide?0:1};return React.createElement("div",{className:"cu-progress",style:e},React.createElement("div",{className:"cu-progress-bar",style:t}),this.props.spinner?React.createElement(Spinner,null):null)}}),Spinner=React.createClass({displayName:"Spinner",render:function(){return React.createElement("div",{className:"cu-spinner"})}}),Progressbar=React.createClass({displayName:"Progressbar",getInitialState:function(){return{rate:null,done:!1}},getDefaultProps:function(){return{speed:.2,spinner:!0,easing:"ease",maxRate:.9996,incStep:.04,minStep:.02,maxStep:.06,trickle:!0,trickleSpeed:800,setTrickle:!1}},start:function(){this._init(),this.set("1%"),this.props.trickle&&this._autoInc()},set:function(t,e){!e&&this._init(),t=this._format(t),100===t?this.setState({rate:100}):(t=t>100*this.props.maxRate?100*this.props.maxRate:t,this.setState({rate:t}))},inc:function(t){this._init(),this.props.trickle&&this._autoInc(),t=t?this._format(t):100*this.props.incStep;var e=this.state.rate+t;this.set(e+"%",!0)},done:function(){this.set("100%"),setTimeout(function(){this.setState({done:!0}),setTimeout(function(){this.setState({rate:null})}.bind(this),2*this.props.speed*1e3)}.bind(this),1e3*this.props.speed)},_format:function(t){return"number"==typeof t?t>1?100*this.pros.maxRate:100*t:"string"==typeof t?parseFloat(t)>100?100*this.props.maxRate:parseFloat(t):void 0},_init:function(){this.state.done&&this.setState({done:!1}),this.timer&&this._clearInterval()},_autoInc:function(){var t,e;this.timer=setInterval(function(){return e=this._getRadomStep(),t=this.state.rate+e,console.log(e),t>100*this.props.maxRate?(console.log(100*this.props.maxRate),void this._clearInterval()):(console.log(t),void this.set(t+"%",!0))}.bind(this),this.props.trickleSpeed)},_clearInterval:function(){this.timer&&clearInterval(this.timer)},_getRadomStep:function(t,e){return t=t||100*this.props.minStep,e=e||100*this.props.maxStep,Math.random()*(e-t)+t},render:function(){var t={opacity:this.state.done?0:1,transition:"opacity "+2*this.props.speed+"s "+this.props.easing},e={width:this.state.rate?this.state.rate+"%":0,transition:"width "+this.props.speed+"s "+this.props.easing};return this.state.rate?React.createElement("div",{className:"cu-progress",style:t},React.createElement("div",{className:"cu-progress-bar",style:e}),this.props.spinner?React.createElement(Spinner,null):null):null}}),ToolTip=React.createClass({displayName:"ToolTip",getDefaultProps:function(){return{tip:"tip",trigger:"hover",delay:0,hoverable:!1,position:"tip",width:"200px",type:"span",aHref:"#"}},getInitialState:function(){return{position:this.props.position,isActive:!1,isOnTip:!1,tipHeight:""}},handleMouseOver:function(t){"hover"==this.props.trigger&&this.setState({isActive:!0})},handleMouseOut:function(t){"hover"==this.props.trigger&&setTimeout(function(){return this.state.isOnTip?!1:void this.setState({isActive:!1})}.bind(this),this.props.delay)},handleClick:function(t){"click"==this.props.trigger&&(this.state.isActive?this.setState({isActive:!1}):this.state.isActive||this.setState({isActive:!0}))},handleTipMouseOver:function(t){this.props.hoverable&&(this.setState({isOnTip:!0}),this.setState({isActive:!0}))},handleTipMouseOut:function(t){this.props.hoverable&&(this.setState({isOnTip:!1}),this.setState({isActive:!1}))},componentDidUpdate:function(){this.setTipPosition()},setTipPosition:function(){var t=this.refs.tip.getDOMNode(),e=this.refs.cont.getDOMNode();this.flag||(this.state.tipHeight=t.offsetHeight,this.flag=1);var s=t.offsetWidth,i=t.offsetHeight,o=e.offsetWidth,n=e.offsetHeight;switch(this.state.position){case"left":t.style.top=-(i-n)/2+"px",t.style.left=-(s+20)+"px";break;case"right":t.style.top=-(i-n)/2+"px",t.style.left="100%";break;case"top":t.style.left=-(s-o)/2+"px",t.style.bottom="100%";break;case"bottom":t.style.left=-(s-o)/2+"px",t.style.top="100%";break;default:t.style.top=-(i-n)/2+"px",t.style.left=-(s+20)+"px"}t.style.height=this.state.tipHeight-20+"px",this.prevertTipOverflow()},prevertTipOverflow:function(){var t=this.refs.tip.getDOMNode().getBoundingClientRect().left,e=(this.refs.tip.getDOMNode().getBoundingClientRect().top,this.refs.tip.getDOMNode().offsetWidth),s=(this.refs.tip.getDOMNode().offsetHeight,parseInt(document.body.clientWidth));if(0>t&&t+e>s)return!0;if(0>t){if("left"==this.state.position)return void this.setState({position:"top"});if("top"==this.state.position||"bottom"==this.state.position)return void this.setState({position:"right"})}if(t+e>s){if("right"==this.state.position)return void this.setState({position:"bottom"});if("bottom"==this.state.position||"top"==this.state.position)return void this.setState({position:"left"})}},getTipStyle:function(){return{display:this.state.isActive?"block":"none",color:"pink",backgroundColor:"#333",width:this.props.width}},render:function(){return"span"==this.props.type?React.createElement("span",{className:"tooltip "+this.state.position},React.createElement("span",{ref:"cont",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleClick},this.props.children),React.createElement("div",{onMouseOver:this.handleTipMouseOver,onMouseOut:this.handleTipMouseOut,className:"tip",ref:"tip",style:this.getTipStyle()},this.props.tip)):"a"==this.props.type?React.createElement("span",{className:"tooltip "+this.state.position},React.createElement("a",{href:this.props.aHref,ref:"cont",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleClick},this.props.children),React.createElement("div",{onMouseOver:this.handleTipMouseOver,onMouseOut:this.handleTipMouseOut,className:"tip",ref:"tip",style:this.getTipStyle()},this.props.tip)):"button"==this.props.type?React.createElement("span",{className:"tooltip "+this.state.position},React.createElement("button",{ref:"cont",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleClick},this.props.children),React.createElement("div",{onMouseOver:this.handleTipMouseOver,onMouseOut:this.handleTipMouseOut,className:"tip",ref:"tip",style:this.getTipStyle()},this.props.tip)):void 0}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbHRlci1ncm91cC9maWx0ZXItZ3JvdXAuanN4IiwicHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXItMS5qc3giLCJwcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5qc3giLCJ0b29sdGlwL3Rvb2x0aXAuanN4Il0sIm5hbWVzIjpbImZvbyIsImNvbnNvbGUiLCJsb2ciLCJTcGlubmVyIiwiUmVhY3QiLCJjcmVhdGVDbGFzcyIsImRpc3BsYXlOYW1lIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIlByb2dyZXNzYmFyIiwiZ2V0SW5pdGlhbFN0YXRlIiwicmF0ZSIsImRvbmUiLCJoaWRlIiwiZ2V0RGVmYXVsdFByb3BzIiwic3BlZWQiLCJzcGlubmVyIiwiZWFzaW5nIiwic3RhcnRSZXNldCIsIm1heFJhdGUiLCJpbmNTdGVwIiwidHJpY2tsZSIsInRyaWNrbGVTcGVlZCIsInN0YXJ0IiwidGhpcyIsIl9pbml0IiwiaW5jIiwic2V0IiwibiIsIl9mb3JtYXQiLCJzZXRTdGF0ZSIsInNldFRpbWVvdXQiLCJiaW5kIiwicHJvcHMiLCJzdGF0ZSIsIl9hdXRvSW5jIiwiZGF0YSIsInBhcnNlRmxvYXQiLCJNYXRoIiwicmFuZG9tIiwiYmFyU3R5bGUiLCJ3aWR0aCIsInRyYW5zaXRpb24iLCJwcm9ncmVzc1N0eWxlIiwiZGlzcGxheSIsIm9wYWNpdHkiLCJzdHlsZSIsIm1pblN0ZXAiLCJtYXhTdGVwIiwic2V0VHJpY2tsZSIsIm5ld1JhdGUiLCJwcm9zIiwidGltZXIiLCJfY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiX2dldFJhZG9tU3RlcCIsImNsZWFySW50ZXJ2YWwiLCJtaW4iLCJtYXgiLCJUb29sVGlwIiwidGlwIiwidHJpZ2dlciIsImRlbGF5IiwiaG92ZXJhYmxlIiwicG9zaXRpb24iLCJ0eXBlIiwiYUhyZWYiLCJpc0FjdGl2ZSIsImlzT25UaXAiLCJ0aXBIZWlnaHQiLCJoYW5kbGVNb3VzZU92ZXIiLCJlIiwiaGFuZGxlTW91c2VPdXQiLCJoYW5kbGVDbGljayIsImhhbmRsZVRpcE1vdXNlT3ZlciIsImhhbmRsZVRpcE1vdXNlT3V0IiwiY29tcG9uZW50RGlkVXBkYXRlIiwic2V0VGlwUG9zaXRpb24iLCJyZWZzIiwiZ2V0RE9NTm9kZSIsImNvbnQiLCJmbGFnIiwib2Zmc2V0SGVpZ2h0IiwidGlwV2lkdGgiLCJvZmZzZXRXaWR0aCIsImNvbnRXaWR0aCIsImNvbnRIZWlnaHQiLCJ0b3AiLCJsZWZ0IiwiYm90dG9tIiwiaGVpZ2h0IiwicHJldmVydFRpcE92ZXJmbG93IiwidGlwWCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImF2YWlsV2lkdGgiLCJwYXJzZUludCIsImRvY3VtZW50IiwiYm9keSIsImNsaWVudFdpZHRoIiwiZ2V0VGlwU3R5bGUiLCJjb2xvciIsImJhY2tncm91bmRDb2xvciIsInJlZiIsIm9uTW91c2VPdmVyIiwib25Nb3VzZU91dCIsIm9uQ2xpY2siLCJjaGlsZHJlbiIsImhyZWYiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLEtBQU0sQ0FDVkMsU0FBUUMsSUFBSUYsSUNDWixJQUFJRyxTQUFBQyxNQUFBQyxhQUE2QkMsWUFBQSxVQUMvQkMsT0FBUSxXQUNOLE1BQ0VILE9BQUFJLGNBQUEsT0FBSUMsVUFBQyxrQkFLUEMsWUFBQU4sTUFBQUMsYUFBaUNDLFlBQUEsY0FDcENLLGdCQUFpQixXQUNkLE9BQ0NDLEtBQU0sRUFDTkMsTUFBTSxFQUNOQyxNQUFNLElBR1RDLGdCQUFpQixXQUNmLE9BQ0VDLE1BQU8sR0FDUEMsU0FBUyxFQUNUQyxPQUFRLE9BQ1JDLFlBQVksRUFDWkMsUUFBUyxLQUNUQyxRQUFTLElBQ1RDLFNBQVMsRUFDVEMsYUFBYyxNQUdsQkMsTUFBTyxXQUNOQyxLQUFLQyxRQUVMRCxLQUFLRSxPQUVOQyxJQUFLLFNBQVNDLEdBQ2JBLEVBQUlKLEtBQUtLLFFBQVFELEdBQ1IsTUFBTkEsR0FFRkosS0FBS00sVUFDSm5CLEtBQU0sTUFFUG9CLFdBQVcsV0FDVlAsS0FBS00sVUFDSmpCLE1B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LE1BQUFJLGNBQUEsVUFBTytGLElBQUMsT0FBSUMsWUFBTy9FLEtBQWE4QyxnQkFBS2tDLFdBQWlCaEYsS0FBVWdELGVBQU9pQyxRQUFnQmpGLEtBQUFpRCxhQUFjakQsS0FBYVMsTUFBQ3lFLFVBQ25IdkcsTUFBQUksY0FBQSxPQUFJZ0csWUFBQy9FLEtBQWFrRCxtQkFBdUI4QixXQUFFaEYsS0FBWW1ELGtCQUFLbkUsVUFBbUIsTUFBVThGLElBQUEsTUFBU3hELE1BQUN0QixLQUFNMkUsZUFBWTNFLEtBQVdTLE1BQUsyQixNQUpqSiIsImZpbGUiOiJDaGFybS1VSS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBmb28gPSAxO1xyXG5jb25zb2xlLmxvZyhmb28pO1xyXG4iLCIndXNlIHN0cmljdCdcclxuXHJcbnZhciBTcGlubmVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImN1LXNwaW5uZXJcIj48L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG59KTtcclxuXHJcbnZhciBQcm9ncmVzc2JhciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuXHRnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgIFx0cmF0ZTogMCxcclxuICAgIFx0ZG9uZTogZmFsc2UsXHJcbiAgICBcdGhpZGU6IGZhbHNlXHJcbiAgICB9O1xyXG4gIH0sXHJcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNwZWVkOiAuMixcclxuICAgICAgc3Bpbm5lcjogdHJ1ZSxcclxuICAgICAgZWFzaW5nOiAnZWFzZScsXHJcbiAgICAgIHN0YXJ0UmVzZXQ6IGZhbHNlLFxyXG4gICAgICBtYXhSYXRlOiAuOTk2LFxyXG4gICAgICBpbmNTdGVwOiAuMDQsXHJcbiAgICAgIHRyaWNrbGU6IHRydWUsXHJcbiAgICAgIHRyaWNrbGVTcGVlZDogODAwXHJcbiAgICB9O1xyXG4gIH0sXHJcbiAgc3RhcnQ6IGZ1bmN0aW9uKCkge1xyXG4gIFx0dGhpcy5faW5pdCgpO1xyXG4vL1x0dGhpcy5wcm9wcy5zdGFydFJlc2V0IHx8ICF0aGlzLnN0YXRlLnJhdGUgJiYgdGhpcy5zZXQoMCk7XHJcbiAgXHR0aGlzLmluYygpO1xyXG4gIH0sXHJcbiAgc2V0OiBmdW5jdGlvbihuKSB7XHJcbiAgXHRuID0gdGhpcy5fZm9ybWF0KG4pO1xyXG4gIFx0aWYobiA9PT0gMTAwKSB7XHJcbiAgXHRcdC8qIGRvbmUgKi9cclxuXHQgIFx0dGhpcy5zZXRTdGF0ZSh7XHJcblx0ICBcdFx0cmF0ZTogMTAwXHJcblx0ICBcdH0pO1xyXG4gIFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XHJcblx0XHQgIFx0XHRoaWRlOiB0cnVlXHJcblx0XHQgIFx0fSk7XHJcblx0XHQgIFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XHJcblx0ICBcdFx0XHRcdHJhdGU6IDAsXHJcblx0XHRcdCAgXHRcdGRvbmU6IHRydWVcclxuXHRcdFx0ICBcdH0pO1xyXG5cdCAgXHRcdH0uYmluZCh0aGlzKSwgdGhpcy5wcm9wcy5zcGVlZCAqIDIgKiAxMDAwKTtcclxuICBcdFx0fS5iaW5kKHRoaXMpLCB0aGlzLnByb3BzLnNwZWVkICogMTAwMCk7XHJcbiAgXHR9IGVsc2Uge1xyXG4gIFx0XHR0aGlzLl9pbml0KCk7XHJcblx0ICBcdHRoaXMuc2V0U3RhdGUoe1xyXG5cdCAgXHRcdHJhdGU6IG5cclxuXHQgIFx0fSk7XHJcbiAgXHR9XHJcbiAgfSxcclxuICBpbmM6IGZ1bmN0aW9uKG4pIHtcclxuICBcdHZhciByYXRlID0gdGhpcy5zdGF0ZS5yYXRlO1xyXG4gIFx0Y29uc29sZS5sb2cocmF0ZSk7XHJcbiAgXHRuID0gdGhpcy5fZm9ybWF0KG4gfHwgdGhpcy5wcm9wcy5pbmNTdGVwKTtcclxuICBcdGlmKHRoaXMuc3RhdGUucmF0ZSAhPT0gMTAwICYmIHJhdGUgKyBuIDwgdGhpcy5wcm9wcy5tYXhSYXRlICogMTAwKSB7XHJcbiAgXHRcdHJhdGUgKz0gbjtcclxuICBcdFx0dGhpcy5zZXQocmF0ZSAvIDEwMCk7XHJcbiAgXHRcdHRoaXMucHJvcHMudHJpY2tsZSAmJiB0aGlzLl9hdXRvSW5jKHJhdGUpO1xyXG4gIFx0fSBlbHNle1xyXG4gIFx0XHRyZXR1cm47XHJcbiAgXHR9XHJcbiAgfSxcclxuICBkb25lOiBmdW5jdGlvbigpIHtcclxuICBcdHRoaXMuc2V0KDEpO1xyXG4gIH0sXHJcbiAgX2Zvcm1hdDogZnVuY3Rpb24oZGF0YSkge1xyXG4gIFx0aWYodHlwZW9mIGRhdGEgPT09ICdudW1iZXInKXtcclxuICBcdFx0cmV0dXJuIGRhdGEgKiAxMDA7XHJcbiAgXHR9IGVsc2UgaWYodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XHJcbiAgXHRcdHJldHVybiBwYXJzZUZsb2F0KGRhdGEpO1xyXG4gIFx0fVxyXG4gIH0sXHJcbiAgX2F1dG9JbmM6IGZ1bmN0aW9uKHJhdGUpIHtcclxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmKHRoaXMuc3RhdGUucmF0ZSA9PT0gMTAwKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuaW5jKChNYXRoLnJhbmRvbSgpICogNSArIDEpIC8gMTAwKTtcclxuXHRcdH0uYmluZCh0aGlzKSwgdGhpcy5wcm9wcy50cmlja2xlU3BlZWQpO1xyXG5cdH0sXHJcblx0X2luaXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5zZXRTdGF0ZSh7XHJcbiAgXHRcdGRvbmU6IGZhbHNlLFxyXG4gICAgXHRoaWRlOiBmYWxzZVxyXG4gIFx0fSk7XHJcblx0fSxcclxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xyXG4gIFx0dmFyIGJhclN0eWxlID0ge1xyXG4gIFx0XHQvKnRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKCcgKyAodGhpcy5zdGF0ZS5yYXRlIC0gMTAwKSArICclLCAwLCAwKScsXHJcbiAgXHRcdFdlYmtpdFRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKCcgKyAodGhpcy5zdGF0ZS5yYXRlIC0gMTAwKSArICclLCAwLCAwKScsKi9cclxuICBcdFx0d2lkdGg6IHRoaXMuc3RhdGUucmF0ZSArICclJyxcclxuICBcdFx0dHJhbnNpdGlvbjogJ3dpZHRoICcgKyB0aGlzLnByb3BzLnNwZWVkICsgJ3MgJyArIHRoaXMucHJvcHMuZWFzaW5nICsgJyAsb3BhY2l0eSAnICsgdGhpcy5wcm9wcy5zcGVlZCAqIDIgKyAncyAnICsgdGhpcy5wcm9wcy5lYXNpbmcgIFx0fTtcclxuICBcdHZhciBwcm9ncmVzc1N0eWxlID0ge1xyXG4gIFx0XHRkaXNwbGF5OiB0aGlzLnN0YXRlLmRvbmUgPyAnbm9uZScgOiAnYmxvY2snLFxyXG4gIFx0XHR0cmFuc2l0aW9uOiAnb3BhY2l0eSAnICsgdGhpcy5wcm9wcy5zcGVlZCAqIDIgKyAncyAnICsgdGhpcy5wcm9wcy5lYXNpbmcsXHJcbiAgXHRcdG9wYWNpdHk6ICF0aGlzLnN0YXRlLnJhdGUgfHwgdGhpcy5zdGF0ZS5oaWRlID8gMCA6IDFcclxuICBcdH07XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImN1LXByb2dyZXNzXCIgc3R5bGU9e3Byb2dyZXNzU3R5bGV9PlxyXG4gICAgICBcdDxkaXYgY2xhc3NOYW1lPVwiY3UtcHJvZ3Jlc3MtYmFyXCIgc3R5bGU9e2JhclN0eWxlfT48L2Rpdj5cclxuICAgICAgXHR7dGhpcy5wcm9wcy5zcGlubmVyID8gPFNwaW5uZXIgLz4gOiBudWxsfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG59KTtcclxuXHJcbiIsIid1c2Ugc3RyaWN0J1xyXG5cclxudmFyIFNwaW5uZXIgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3Utc3Bpbm5lclwiPjwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcbn0pO1xyXG5cclxudmFyIFByb2dyZXNzYmFyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG5cdGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgXHRyYXRlOiBudWxsLFxyXG4gICAgXHRkb25lOiBmYWxzZVxyXG4gICAgfTtcclxuICB9LFxyXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzcGVlZDogMC4yLFxyXG4gICAgICBzcGlubmVyOiB0cnVlLFxyXG4gICAgICBlYXNpbmc6ICdlYXNlJyxcclxuICAgICAgbWF4UmF0ZTogMC45OTk2LFxyXG4gICAgICBpbmNTdGVwOiAwLjA0LFxyXG4gICAgICBtaW5TdGVwOiAwLjAyLFxyXG4gICAgICBtYXhTdGVwOiAwLjA2LFxyXG4gICAgICB0cmlja2xlOiB0cnVlLFxyXG4gICAgICB0cmlja2xlU3BlZWQ6IDgwMCxcclxuICAgICAgc2V0VHJpY2tsZTogZmFsc2VcclxuICAgIH07XHJcbiAgfSxcclxuICBzdGFydDogZnVuY3Rpb24oKSB7XHJcbiAgXHR0aGlzLl9pbml0KCk7XHJcbiAgXHR0aGlzLnNldCgnMSUnKTtcclxuXHQgIHRoaXMucHJvcHMudHJpY2tsZSAmJiB0aGlzLl9hdXRvSW5jKCk7XHJcbiAgfSxcclxuICBzZXQ6IGZ1bmN0aW9uKG4sIHRyaWNrbGUpIHtcclxuICBcdCF0cmlja2xlICYmIHRoaXMuX2luaXQoKTtcclxuICBcdG4gPSB0aGlzLl9mb3JtYXQobik7XHJcbiAgXHRpZihuID09PSAxMDApIHtcclxuICBcdFx0LyogZG9uZSAqL1xyXG4gIFx0XHR0aGlzLnNldFN0YXRlKHtcclxuICBcdFx0XHRyYXRlOiAxMDBcclxuICBcdFx0fSk7XHJcbiAgXHR9IGVsc2Uge1xyXG4gIFx0XHRuID0gbiA+IHRoaXMucHJvcHMubWF4UmF0ZSAqIDEwMCA/IHRoaXMucHJvcHMubWF4UmF0ZSAqIDEwMCA6IG47XHJcbiAgXHRcdHRoaXMuc2V0U3RhdGUoe1xyXG4gIFx0XHRcdHJhdGU6IG5cclxuICBcdFx0fSk7XHJcbiAgXHR9XHJcbiAgfSxcclxuICBpbmM6IGZ1bmN0aW9uKG4pIHtcclxuICBcdHRoaXMuX2luaXQoKTtcclxuICBcdHRoaXMucHJvcHMudHJpY2tsZSAmJiB0aGlzLl9hdXRvSW5jKCk7XHJcbiAgXHRuID0gbiA/IHRoaXMuIF9mb3JtYXQobikgOiB0aGlzLnByb3BzLmluY1N0ZXAgKiAxMDA7XHJcbiAgXHR2YXIgbmV3UmF0ZSA9IHRoaXMuc3RhdGUucmF0ZSArIG47XHJcblx0XHR0aGlzLnNldChuZXdSYXRlICsgJyUnLCB0cnVlKTtcclxuICB9LFxyXG4gIGRvbmU6IGZ1bmN0aW9uKCkge1xyXG4gIFx0dGhpcy5zZXQoJzEwMCUnKTtcclxuICBcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgXHRcdHRoaXMuc2V0U3RhdGUoe1xyXG4gIFx0XHRcdGRvbmU6IHRydWVcclxuICBcdFx0fSk7XHJcbiAgXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0ICBcdFx0dGhpcy5zZXRTdGF0ZSh7XHJcblx0ICBcdFx0XHRyYXRlOiBudWxsXHJcblx0ICBcdFx0fSk7XHJcbiAgXHRcdH0uYmluZCh0aGlzKSwgdGhpcy5wcm9wcy5zcGVlZCAqIDIgKiAxMDAwKTtcclxuICBcdH0uYmluZCh0aGlzKSwgdGhpcy5wcm9wcy5zcGVlZCAqIDEwMDApO1xyXG4gIH0sXHJcbiAgX2Zvcm1hdDogZnVuY3Rpb24oZGF0YSkge1xyXG4gIFx0aWYodHlwZW9mIGRhdGEgPT09ICdudW1iZXInKSB7XHJcbiAgXHRcdHJldHVybiBkYXRhID4gMSA/IHRoaXMucHJvcy5tYXhSYXRlICogMTAwIDogZGF0YSAqIDEwMDtcclxuICBcdH0gZWxzZSBpZih0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcclxuICBcdFx0cmV0dXJuIHBhcnNlRmxvYXQoZGF0YSkgPiAxMDAgPyB0aGlzLnByb3BzLm1heFJhdGUgKiAxMDAgOiBwYXJzZUZsb2F0KGRhdGEpO1xyXG4gIFx0fSBlbHNlIHtcclxuICBcdFx0cmV0dXJuO1xyXG4gIFx0fVxyXG4gIH0sXHJcbiAgX2luaXQ6IGZ1bmN0aW9uKCkge1xyXG4gIFx0dGhpcy5zdGF0ZS5kb25lICYmIHRoaXMuc2V0U3RhdGUoe1xyXG5cdFx0XHRkb25lOiBmYWxzZVxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnRpbWVyICYmIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcclxuICB9LFxyXG4gIF9hdXRvSW5jOiBmdW5jdGlvbigpIHtcclxuICBcdHZhciBuZXdSYXRlO1xyXG4gIFx0dmFyIHJhbmRvbTtcclxuXHRcdHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuXHRcdFx0cmFuZG9tID0gdGhpcy5fZ2V0UmFkb21TdGVwKCk7XHJcblx0XHRcdG5ld1JhdGUgPSB0aGlzLnN0YXRlLnJhdGUgKyByYW5kb207XHJcblx0XHRcdGNvbnNvbGUubG9nKHJhbmRvbSk7XHJcblx0XHRcdGlmKG5ld1JhdGUgPiB0aGlzLnByb3BzLm1heFJhdGUgKiAxMDApIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyh0aGlzLnByb3BzLm1heFJhdGUgKiAxMDApO1xyXG5cdFx0XHRcdHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc29sZS5sb2cobmV3UmF0ZSk7XHJcblx0XHRcdHRoaXMuc2V0KG5ld1JhdGUgKyAnJScsIHRydWUpO1xyXG5cdFx0fS5iaW5kKHRoaXMpLCB0aGlzLnByb3BzLnRyaWNrbGVTcGVlZCk7XHJcblx0fSxcclxuXHRfY2xlYXJJbnRlcnZhbDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnRpbWVyICYmIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XHJcblx0fSxcclxuXHRfZ2V0UmFkb21TdGVwOiBmdW5jdGlvbihtaW4sIG1heCkge1xyXG5cdFx0bWluID0gbWluIHx8IHRoaXMucHJvcHMubWluU3RlcCAqIDEwMDtcclxuXHRcdG1heCA9IG1heCB8fCB0aGlzLnByb3BzLm1heFN0ZXAgKiAxMDA7XHJcblx0XHRyZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xyXG5cdH0sXHJcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcclxuICBcdHZhciBwcm9ncmVzc1N0eWxlID0ge1xyXG4gIFx0XHQvL2Rpc3BsYXk6ICghdGhpcy5zdGF0ZS5yYXRlICYmIHR5cGVvZiB0aGlzLnN0YXRlLnJhdGUgPT09ICdvYmplY3QnKSA/ICdub25lJyA6ICdibG9jaycsXHJcbiAgXHRcdG9wYWNpdHk6IHRoaXMuc3RhdGUuZG9uZSA/IDAgOiAxLFxyXG4gIFx0XHR0cmFuc2l0aW9uOiAnb3BhY2l0eSAnICsgdGhpcy5wcm9wcy5zcGVlZCAqIDIgKyAncyAnICsgdGhpcy5wcm9wcy5lYXNpbmdcclxuICBcdH07XHJcbiAgICB2YXIgYmFyU3R5bGUgPSB7XHJcbiAgXHRcdHdpZHRoOiAhdGhpcy5zdGF0ZS5yYXRlID8gMCA6IHRoaXMuc3RhdGUucmF0ZSArICclJyxcclxuICBcdFx0dHJhbnNpdGlvbjogJ3dpZHRoICcgKyB0aGlzLnByb3BzLnNwZWVkICsgJ3MgJyArIHRoaXMucHJvcHMuZWFzaW5nXHJcblx0XHR9O1xyXG4gIFx0cmV0dXJuIHRoaXMuc3RhdGUucmF0ZSA/IChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdS1wcm9ncmVzc1wiIHN0eWxlPXtwcm9ncmVzc1N0eWxlfT5cclxuICAgICAgXHQ8ZGl2IGNsYXNzTmFtZT1cImN1LXByb2dyZXNzLWJhclwiIHN0eWxlPXtiYXJTdHlsZX0+PC9kaXY+XHJcbiAgICAgIFx0e3RoaXMucHJvcHMuc3Bpbm5lciA/IDxTcGlubmVyIC8+IDogbnVsbH1cclxuICAgICAgPC9kaXY+XHJcbiAgICApIDogbnVsbDtcclxuICB9XHJcbn0pO1xyXG5cclxuIiwidmFyIFRvb2xUaXAgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpcDogXCJ0aXBcIixcbiAgICAgICAgICAgIHRyaWdnZXI6ICdob3ZlcicsXG4gICAgICAgICAgICBkZWxheTogMCxcbiAgICAgICAgICAgIGhvdmVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJ0aXBcIixcbiAgICAgICAgICAgIHdpZHRoOiBcIjIwMHB4XCIsXG4gICAgICAgICAgICB0eXBlOiAnc3BhbicsXG4gICAgICAgICAgICBhSHJlZjogXCIjXCJcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5wcm9wcy5wb3NpdGlvbixcbiAgICAgICAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzT25UaXA6IGZhbHNlLFxuICAgICAgICAgICAgdGlwSGVpZ2h0OiBcIlwiXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBoYW5kbGVNb3VzZU92ZXI6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYodGhpcy5wcm9wcy50cmlnZ2VyPT1cImhvdmVyXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQWN0aXZlOiB0cnVlfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGhhbmRsZU1vdXNlT3V0OiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmKHRoaXMucHJvcHMudHJpZ2dlcj09XCJob3ZlclwiKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUuaXNPblRpcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQWN0aXZlOiBmYWxzZX0pO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpICwgdGhpcy5wcm9wcy5kZWxheSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmKHRoaXMucHJvcHMudHJpZ2dlcj09XCJjbGlja1wiKSB7XG4gICAgICAgICAgICBpZih0aGlzLnN0YXRlLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNBY3RpdmU6IGZhbHNlfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYoIXRoaXMuc3RhdGUuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0FjdGl2ZTogdHJ1ZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVUaXBNb3VzZU92ZXI6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYodGhpcy5wcm9wcy5ob3ZlcmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzT25UaXA6IHRydWV9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQWN0aXZlOiB0cnVlfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGhhbmRsZVRpcE1vdXNlT3V0OiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmKHRoaXMucHJvcHMuaG92ZXJhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc09uVGlwOiBmYWxzZX0pO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNBY3RpdmU6IGZhbHNlfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0VGlwUG9zaXRpb24oKTtcbiAgICB9LFxuICAgIHNldFRpcFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHRpcCA9IHRoaXMucmVmcy50aXAuZ2V0RE9NTm9kZSgpO1xuICAgICAgICB2YXIgY29udCA9IHRoaXMucmVmcy5jb250LmdldERPTU5vZGUoKTtcbiAgICAgICAgaWYoIXRoaXMuZmxhZykge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS50aXBIZWlnaHQgPSB0aXAub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5mbGFnID0gMTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlwV2lkdGggPSB0aXAub2Zmc2V0V2lkdGg7XG4gICAgICAgIHZhciB0aXBIZWlnaHQgPSB0aXAub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB2YXIgY29udFdpZHRoID0gY29udC5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIGNvbnRIZWlnaHQgPSBjb250Lm9mZnNldEhlaWdodDtcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwibGVmdFwiOnRpcC5zdHlsZS50b3AgPSAtKHRpcEhlaWdodC1jb250SGVpZ2h0KS8yK1wicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcC5zdHlsZS5sZWZ0ID0gLSh0aXBXaWR0aCsyMCkrXCJweFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJpZ2h0XCI6dGlwLnN0eWxlLnRvcCA9IC0odGlwSGVpZ2h0LWNvbnRIZWlnaHQpLzIrXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlwLnN0eWxlLmxlZnQgPSBcIjEwMCVcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ0b3BcIjp0aXAuc3R5bGUubGVmdCA9IC0odGlwV2lkdGgtY29udFdpZHRoKS8yK1wicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcC5zdHlsZS5ib3R0b20gPSBcIjEwMCVcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJib3R0b21cIjp0aXAuc3R5bGUubGVmdCA9IC0odGlwV2lkdGgtY29udFdpZHRoKS8yK1wicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcC5zdHlsZS50b3AgPSBcIjEwMCVcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRpcC5zdHlsZS50b3AgPSAtKHRpcEhlaWdodC1jb250SGVpZ2h0KS8yK1wicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgdGlwLnN0eWxlLmxlZnQgPSAtKHRpcFdpZHRoKzIwKStcInB4XCI7XG4gICAgICAgIH1cbiAgICAgICAgdGlwLnN0eWxlLmhlaWdodCA9IHRoaXMuc3RhdGUudGlwSGVpZ2h0LTIwK1wicHhcIjtcbiAgICAgICAgdGhpcy5wcmV2ZXJ0VGlwT3ZlcmZsb3coKTtcbiAgICB9LFxuICAgIHByZXZlcnRUaXBPdmVyZmxvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0aXBYID0gdGhpcy5yZWZzLnRpcC5nZXRET01Ob2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICAgICAgdmFyIHRpcFkgPSB0aGlzLnJlZnMudGlwLmdldERPTU5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgIHZhciB0aXBXaWR0aCA9IHRoaXMucmVmcy50aXAuZ2V0RE9NTm9kZSgpLm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgdGlwSGVpZ2h0ID0gdGhpcy5yZWZzLnRpcC5nZXRET01Ob2RlKCkub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB2YXIgYXZhaWxXaWR0aCA9IHBhcnNlSW50KGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgpO1xuICAgICAgICBpZih0aXBYIDwgMCAmJiB0aXBYK3RpcFdpZHRoID4gYXZhaWxXaWR0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGlwWCA8IDApIHtcbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUucG9zaXRpb24gPT0gXCJsZWZ0XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtwb3NpdGlvbjogXCJ0b3BcIn0pO1xuICAgICAgICAgICAgICAgIHJldHVybiA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih0aGlzLnN0YXRlLnBvc2l0aW9uID09IFwidG9wXCIgfHwgdGhpcy5zdGF0ZS5wb3NpdGlvbiA9PSBcImJvdHRvbVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cG9zaXRpb246IFwicmlnaHRcIn0pO1xuICAgICAgICAgICAgICAgIHJldHVybiA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYodGlwWCt0aXBXaWR0aCA+IGF2YWlsV2lkdGgpIHtcbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUucG9zaXRpb24gPT0gXCJyaWdodFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cG9zaXRpb246IFwiYm90dG9tXCJ9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5wb3NpdGlvbiA9PSBcImJvdHRvbVwiIHx8IHRoaXMuc3RhdGUucG9zaXRpb24gPT0gXCJ0b3BcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3Bvc2l0aW9uOiBcImxlZnRcIn0pO1xuICAgICAgICAgICAgICAgIHJldHVybiA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0sXG4gICAgZ2V0VGlwU3R5bGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGlzcGxheTogdGhpcy5zdGF0ZS5pc0FjdGl2ZT9cImJsb2NrXCI6XCJub25lXCIsXG4gICAgICAgICAgICBjb2xvcjogXCJwaW5rXCIsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzMzM1wiLFxuICAgICAgICAgICAgd2lkdGg6IHRoaXMucHJvcHMud2lkdGgsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZih0aGlzLnByb3BzLnR5cGU9PVwic3BhblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17XCJ0b29sdGlwIFwiK3RoaXMuc3RhdGUucG9zaXRpb259PlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiByZWY9XCJjb250XCIgb25Nb3VzZU92ZXI9e3RoaXMuaGFuZGxlTW91c2VPdmVyfSBvbk1vdXNlT3V0PXt0aGlzLmhhbmRsZU1vdXNlT3V0fSBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfT57dGhpcy5wcm9wcy5jaGlsZHJlbn08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgb25Nb3VzZU92ZXI9e3RoaXMuaGFuZGxlVGlwTW91c2VPdmVyfSBvbk1vdXNlT3V0PXt0aGlzLmhhbmRsZVRpcE1vdXNlT3V0fSBjbGFzc05hbWU9XCJ0aXBcIiByZWY9XCJ0aXBcIiBzdHlsZT17dGhpcy5nZXRUaXBTdHlsZSgpfT57dGhpcy5wcm9wcy50aXB9PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLnByb3BzLnR5cGU9PVwiYVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17XCJ0b29sdGlwIFwiK3RoaXMuc3RhdGUucG9zaXRpb259PlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXt0aGlzLnByb3BzLmFIcmVmfSByZWY9XCJjb250XCIgb25Nb3VzZU92ZXI9e3RoaXMuaGFuZGxlTW91c2VPdmVyfSBvbk1vdXNlT3V0PXt0aGlzLmhhbmRsZU1vdXNlT3V0fSBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfT57dGhpcy5wcm9wcy5jaGlsZHJlbn08L2E+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgb25Nb3VzZU92ZXI9e3RoaXMuaGFuZGxlVGlwTW91c2VPdmVyfSBvbk1vdXNlT3V0PXt0aGlzLmhhbmRsZVRpcE1vdXNlT3V0fSBjbGFzc05hbWU9XCJ0aXBcIiByZWY9XCJ0aXBcIiBzdHlsZT17dGhpcy5nZXRUaXBTdHlsZSgpfT57dGhpcy5wcm9wcy50aXB9PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLnByb3BzLnR5cGU9PVwiYnV0dG9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtcInRvb2x0aXAgXCIrdGhpcy5zdGF0ZS5wb3NpdGlvbn0+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gcmVmPVwiY29udFwiIG9uTW91c2VPdmVyPXt0aGlzLmhhbmRsZU1vdXNlT3Zlcn0gb25Nb3VzZU91dD17dGhpcy5oYW5kbGVNb3VzZU91dH0gb25DbGljaz17dGhpcy5oYW5kbGVDbGlja30+e3RoaXMucHJvcHMuY2hpbGRyZW59PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgb25Nb3VzZU92ZXI9e3RoaXMuaGFuZGxlVGlwTW91c2VPdmVyfSBvbk1vdXNlT3V0PXt0aGlzLmhhbmRsZVRpcE1vdXNlT3V0fSBjbGFzc05hbWU9XCJ0aXBcIiByZWY9XCJ0aXBcIiBzdHlsZT17dGhpcy5nZXRUaXBTdHlsZSgpfT57dGhpcy5wcm9wcy50aXB9PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
=======
var foo=1;console.log(foo);var ToolTip=React.createClass({displayName:"ToolTip",getInitialState:function(){return{position:this.props.position,isActive:!1,isOnTip:!1,tipHeight:""}},handleMouseOver:function(t){"hover"==this.props.trigger&&this.setState({isActive:!0})},handleMouseOut:function(t){"hover"==this.props.trigger&&setTimeout(function(){return this.state.isOnTip?!1:void this.setState({isActive:!1})}.bind(this),this.props.delay)},handleClick:function(t){"click"==this.props.trigger&&(this.state.isActive?this.setState({isActive:!1}):this.state.isActive||this.setState({isActive:!0}))},handleTipMouseOver:function(t){this.props.hoverable&&(this.setState({isOnTip:!0}),this.setState({isActive:!0}))},handleTipMouseOut:function(t){this.props.hoverable&&(this.setState({isOnTip:!1}),this.setState({isActive:!1}))},componentDidUpdate:function(){this.setTipPosition()},setTipPosition:function(){var t=this.refs.tip.getDOMNode(),e=this.refs.cont.getDOMNode();this.flag||(this.state.tipHeight=t.offsetHeight,this.flag=1);var i=t.offsetWidth,s=t.offsetHeight,o=e.offsetWidth,n=e.offsetHeight;switch(this.state.position){case"left":t.style.top=-(s-n)/2+"px",t.style.left=-(i+20)+"px";break;case"right":t.style.top=-(s-n)/2+"px",t.style.left="100%";break;case"top":t.style.left=-(i-o)/2+"px",t.style.bottom="100%";break;case"bottom":t.style.left=-(i-o)/2+"px",t.style.top="100%"}t.style.height=this.state.tipHeight-20+"px",this.prevertTipOverflow()},prevertTipOverflow:function(){var t=this.refs.tip.getDOMNode().getBoundingClientRect().left,e=(this.refs.tip.getDOMNode().getBoundingClientRect().top,this.refs.tip.getDOMNode().offsetWidth),i=(this.refs.tip.getDOMNode().offsetHeight,parseInt(document.body.clientWidth));if(0>t&&t+e>i)return!0;if(0>t){if("left"==this.state.position)return void this.setState({position:"top"});if("top"==this.state.position||"bottom"==this.state.position)return void this.setState({position:"right"})}if(t+e>i){if("right"==this.state.position)return void this.setState({position:"bottom"});if("bottom"==this.state.position||"top"==this.state.position)return void this.setState({position:"left"})}},getTipStyle:function(){return{display:this.state.isActive?"block":"none",color:"pink",backgroundColor:"#333",width:this.props.width}},render:function(){return React.createElement("span",{className:"tooltip "+this.state.position},React.createElement("span",{ref:"cont",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleClick},this.props.children),React.createElement("div",{onMouseOver:this.handleTipMouseOver,onMouseOut:this.handleTipMouseOut,className:"tip",ref:"tip",style:this.getTipStyle()},this.props.tip))}}),Spinner=React.createClass({displayName:"Spinner",render:function(){return React.createElement("div",{className:"cu-spinner"})}}),Progressbar=React.createClass({displayName:"Progressbar",getInitialState:function(){return{rate:null,done:!1}},getDefaultProps:function(){return{speed:.6,spinner:!0,easing:"ease",maxRate:.98,incStep:.04,minStep:.005,maxStep:.03,trickle:!0,trickleSpeed:800,setTrickle:!1}},start:function(){this._init(),this.set("0.5%"),this.props.trickle&&this._autoInc()},set:function(t,e){!e&&this._init(),t=this._format(t),100===t?this.setState({rate:100}):(t=t>100*this.props.maxRate?100*this.props.maxRate:t,this.setState({rate:t}))},inc:function(t){this._init(),this.props.trickle&&this._autoInc(),t=t?this._format(t):100*this.props.incStep;var e=this.state.rate+t;this.set(e+"%",!0)},done:function(){this.set("100%"),setTimeout(function(){this.setState({done:!0}),setTimeout(function(){this.setState({rate:null})}.bind(this),2*this.props.speed*1e3)}.bind(this),1e3*this.props.speed)},_format:function(t){return"number"==typeof t?t>1?100*this.pros.maxRate:100*t:"string"==typeof t?parseFloat(t)>100?100*this.props.maxRate:parseFloat(t):void 0},_init:function(){this.state.done&&this.setState({done:!1}),this.timer&&this._clearInterval()},_autoInc:function(){var t,e;this.timer=setInterval(function(){return e=this._getRadomStep(),t=this.state.rate+e,console.log(e),t>100*this.props.maxRate?(console.log(100*this.props.maxRate),void this._clearInterval()):(console.log(t),void this.set(t+"%",!0))}.bind(this),this.props.trickleSpeed)},_clearInterval:function(){this.timer&&clearInterval(this.timer)},_getRadomStep:function(t,e){return t=t||100*this.props.minStep,e=e||100*this.props.maxStep,Math.random()*(e-t)+t},render:function(){var t={opacity:this.state.done?0:1,transition:"opacity "+2*this.props.speed+"s "+this.props.easing},e={width:this.state.rate?this.state.rate+"%":0,transition:"width "+this.props.speed+"s "+this.props.easing};return this.state.rate?React.createElement("div",{className:"cu-progress",style:t},React.createElement("div",{className:"cu-progress-bar",style:e}),this.props.spinner?React.createElement(Spinner,null):null):null}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbHRlci1ncm91cC9maWx0ZXItZ3JvdXAuanN4IiwidG9vbHRpcC90b29sdGlwLmpzeCIsInByb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmpzeCJdLCJuYW1lcyI6WyJmb28iLCJjb25zb2xlIiwibG9nIiwiVG9vbFRpcCIsIlJlYWN0IiwiY3JlYXRlQ2xhc3MiLCJkaXNwbGF5TmFtZSIsImdldEluaXRpYWxTdGF0ZSIsInBvc2l0aW9uIiwidGhpcyIsInByb3BzIiwiaXNBY3RpdmUiLCJpc09uVGlwIiwidGlwSGVpZ2h0IiwiaGFuZGxlTW91c2VPdmVyIiwiZSIsInRyaWdnZXIiLCJzZXRTdGF0ZSIsImhhbmRsZU1vdXNlT3V0Iiwic2V0VGltZW91dCIsInN0YXRlIiwiYmluZCIsImRlbGF5IiwiaGFuZGxlQ2xpY2siLCJoYW5kbGVUaXBNb3VzZU92ZXIiLCJob3ZlcmFibGUiLCJoYW5kbGVUaXBNb3VzZU91dCIsImNvbXBvbmVudERpZFVwZGF0ZSIsInNldFRpcFBvc2l0aW9uIiwidGlwIiwicmVmcyIsImdldERPTU5vZGUiLCJjb250IiwiZmxhZyIsIm9mZnNldEhlaWdodCIsInRpcFdpZHRoIiwib2Zmc2V0V2lkdGgiLCJjb250V2lkdGgiLCJjb250SGVpZ2h0Iiwic3R5bGUiLCJ0b3AiLCJsZWZ0IiwiYm90dG9tIiwiaGVpZ2h0IiwicHJldmVydFRpcE92ZXJmbG93IiwidGlwWCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImF2YWlsV2lkdGgiLCJwYXJzZUludCIsImRvY3VtZW50IiwiYm9keSIsImNsaWVudFdpZHRoIiwiZ2V0VGlwU3R5bGUiLCJkaXNwbGF5IiwiY29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ3aWR0aCIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJyZWYiLCJvbk1vdXNlT3ZlciIsIm9uTW91c2VPdXQiLCJvbkNsaWNrIiwiY2hpbGRyZW4iLCJTcGlubmVyIiwiUHJvZ3Jlc3NiYXIiLCJyYXRlIiwiZG9uZSIsImdldERlZmF1bHRQcm9wcyIsInNwZWVkIiwic3Bpbm5lciIsImVhc2luZyIsIm1heFJhdGUiLCJpbmNTdGVwIiwibWluU3RlcCIsIm1heFN0ZXAiLCJ0cmlja2xlIiwidHJpY2tsZVNwZWVkIiwic2V0VHJpY2tsZSIsInN0YXJ0IiwiX2luaXQiLCJzZXQiLCJfYXV0b0luYyIsIm4iLCJfZm9ybWF0IiwiaW5jIiwibmV3UmF0ZSIsImRhdGEiLCJwcm9zIiwicGFyc2VGbG9hdCIsInRpbWVyIiwiX2NsZWFySW50ZXJ2YWwiLCJyYW5kb20iLCJzZXRJbnRlcnZhbCIsIl9nZXRSYWRvbVN0ZXAiLCJjbGVhckludGVydmFsIiwibWluIiwibWF4IiwiTWF0aCIsInByb2dyZXNzU3R5bGUiLCJvcGFjaXR5IiwidHJhbnNpdGlvbiIsImJhclN0eWxlIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxLQUFNLENBQ1ZDLFNBQVFDLElBQUlGLElDRFosSUFBSUcsU0FBQUMsTUFBQUMsYUFBNkJDLFlBQUEsVUFDN0JDLGdCQUFpQixXQUNiLE9BQ0lDLFNBQVVDLEtBQUtDLE1BQU1GLFNBQ3JCRyxVQUFVLEVBQ1ZDLFNBQVMsRUFDVEMsVUFBVyxLQUduQkMsZ0JBQWlCLFNBQVNDLEdBQ0MsU0FBcEJOLEtBQUtDLE1BQU1NLFNBQ1ZQLEtBQUtRLFVBQVVOLFVBQVUsS0FHakNPLGVBQWdCLFNBQVNILEdBQ0UsU0FBcEJOLEtBQUtDLE1BQU1NLFNBQ1ZHLFdBQVcsV0FDUCxNQUFHVixNQUFLVyxNQUFNUixTQUNILE1BRVhILE1BQUtRLFVBQVVOLFVBQVUsS0FDM0JVLEtBQUtaLE1BQVFBLEtBQUtDLE1BQU1ZLFFBR2xDQyxZQUFhLFNBQVNSLEdBQ0ssU0FBcEJOLEtBQUtDLE1BQU1NLFVBQ1BQLEtBQUtXLE1BQU1ULFNBQ1ZGLEtBQUtRLFVBQVVOLFVBQVUsSUFDbEJGLEtBQUtXLE1BQU1ULFVBQ2xCRixLQUFLUSxVQUFVTixVQUFVLE1BSXJDYSxtQkFBb0IsU0FBU1QsR0FDdEJOLEtBQUtDLE1BQU1lLFlBQ1ZoQixL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N0YsS0FBS0MsTUFBTTRELE1BQVksS0FBTzdELEtBQUtDLE1BQU04RCxRQUU5RCtCLEdBQ0ovQyxNQUFRL0MsS0FBS1csTUFBTStDLEtBQVcxRCxLQUFLVyxNQUFNK0MsS0FBTyxJQUF0QixFQUMxQm1DLFdBQVksU0FBVzdGLEtBQUtDLE1BQU00RCxNQUFRLEtBQU83RCxLQUFLQyxNQUFNOEQsT0FFN0QsT0FBTy9ELE1BQUtXLE1BQU0rQyxLQUNmL0QsTUFBQXNELGNBQUEsT0FBSUMsVUFBQyxjQUFVcEIsTUFBYzZELEdBQzVCaEcsTUFBQXNELGNBQUEsT0FBSUMsVUFBQyxrQkFBVXBCLE1BQWtCZ0UsSUFDaEM5RixLQUFLQyxNQUFNNkQsUUFBVW5FLE1BQUFzRCxjQUFDTyxRQUFPLE1BQUcsTUFFaEMiLCJmaWxlIjoiQ2hhcm0tVUkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZm9vID0gMTtcbmNvbnNvbGUubG9nKGZvbyk7XG4iLCJ2YXIgVG9vbFRpcCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMucHJvcHMucG9zaXRpb24sXG4gICAgICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICBpc09uVGlwOiBmYWxzZSxcbiAgICAgICAgICAgIHRpcEhlaWdodDogXCJcIlxuICAgICAgICB9O1xuICAgIH0sXG4gICAgaGFuZGxlTW91c2VPdmVyOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmKHRoaXMucHJvcHMudHJpZ2dlcj09XCJob3ZlclwiKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0FjdGl2ZTogdHJ1ZX0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVNb3VzZU91dDogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZih0aGlzLnByb3BzLnRyaWdnZXI9PVwiaG92ZXJcIikge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLnN0YXRlLmlzT25UaXApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0FjdGl2ZTogZmFsc2V9KTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSAsIHRoaXMucHJvcHMuZGVsYXkpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVDbGljazogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZih0aGlzLnByb3BzLnRyaWdnZXI9PVwiY2xpY2tcIikge1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQWN0aXZlOiBmYWxzZX0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmKCF0aGlzLnN0YXRlLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNBY3RpdmU6IHRydWV9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgaGFuZGxlVGlwTW91c2VPdmVyOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmKHRoaXMucHJvcHMuaG92ZXJhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc09uVGlwOiB0cnVlfSk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0FjdGl2ZTogdHJ1ZX0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVUaXBNb3VzZU91dDogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZih0aGlzLnByb3BzLmhvdmVyYWJsZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNPblRpcDogZmFsc2V9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQWN0aXZlOiBmYWxzZX0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldFRpcFBvc2l0aW9uKCk7XG4gICAgfSxcbiAgICBzZXRUaXBQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0aXAgPSB0aGlzLnJlZnMudGlwLmdldERPTU5vZGUoKTtcbiAgICAgICAgdmFyIGNvbnQgPSB0aGlzLnJlZnMuY29udC5nZXRET01Ob2RlKCk7XG4gICAgICAgIGlmKCF0aGlzLmZsYWcpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudGlwSGVpZ2h0ID0gdGlwLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuZmxhZyA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpcFdpZHRoID0gdGlwLm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgdGlwSGVpZ2h0ID0gdGlwLm9mZnNldEhlaWdodDtcbiAgICAgICAgdmFyIGNvbnRXaWR0aCA9IGNvbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIHZhciBjb250SGVpZ2h0ID0gY29udC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZS5wb3NpdGlvbikge1xuICAgICAgICAgICAgY2FzZSBcImxlZnRcIjp0aXAuc3R5bGUudG9wID0gLSh0aXBIZWlnaHQtY29udEhlaWdodCkvMitcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXAuc3R5bGUubGVmdCA9IC0odGlwV2lkdGgrMjApK1wicHhcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyaWdodFwiOnRpcC5zdHlsZS50b3AgPSAtKHRpcEhlaWdodC1jb250SGVpZ2h0KS8yK1wicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcC5zdHlsZS5sZWZ0ID0gXCIxMDAlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidG9wXCI6dGlwLnN0eWxlLmxlZnQgPSAtKHRpcFdpZHRoLWNvbnRXaWR0aCkvMitcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXAuc3R5bGUuYm90dG9tID0gXCIxMDAlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYm90dG9tXCI6dGlwLnN0eWxlLmxlZnQgPSAtKHRpcFdpZHRoLWNvbnRXaWR0aCkvMitcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXAuc3R5bGUudG9wID0gXCIxMDAlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICB9XG4gICAgICAgIHRpcC5zdHlsZS5oZWlnaHQgPSB0aGlzLnN0YXRlLnRpcEhlaWdodC0yMCtcInB4XCI7XG4gICAgICAgIHRoaXMucHJldmVydFRpcE92ZXJmbG93KCk7XG4gICAgfSxcbiAgICBwcmV2ZXJ0VGlwT3ZlcmZsb3c6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdGlwWCA9IHRoaXMucmVmcy50aXAuZ2V0RE9NTm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgICAgIHZhciB0aXBZID0gdGhpcy5yZWZzLnRpcC5nZXRET01Ob2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICB2YXIgdGlwV2lkdGggPSB0aGlzLnJlZnMudGlwLmdldERPTU5vZGUoKS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIHRpcEhlaWdodCA9IHRoaXMucmVmcy50aXAuZ2V0RE9NTm9kZSgpLm9mZnNldEhlaWdodDtcbiAgICAgICAgdmFyIGF2YWlsV2lkdGggPSBwYXJzZUludChkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoKTtcbiAgICAgICAgaWYodGlwWCA8IDAgJiYgdGlwWCt0aXBXaWR0aCA+IGF2YWlsV2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRpcFggPCAwKSB7XG4gICAgICAgICAgICBpZih0aGlzLnN0YXRlLnBvc2l0aW9uID09IFwibGVmdFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cG9zaXRpb246IFwidG9wXCJ9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5wb3NpdGlvbiA9PSBcInRvcFwiIHx8IHRoaXMuc3RhdGUucG9zaXRpb24gPT0gXCJib3R0b21cIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3Bvc2l0aW9uOiBcInJpZ2h0XCJ9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKHRpcFgrdGlwV2lkdGggPiBhdmFpbFdpZHRoKSB7XG4gICAgICAgICAgICBpZih0aGlzLnN0YXRlLnBvc2l0aW9uID09IFwicmlnaHRcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3Bvc2l0aW9uOiBcImJvdHRvbVwifSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUucG9zaXRpb24gPT0gXCJib3R0b21cIiB8fCB0aGlzLnN0YXRlLnBvc2l0aW9uID09IFwidG9wXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtwb3NpdGlvbjogXCJsZWZ0XCJ9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9LFxuICAgIGdldFRpcFN0eWxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IHRoaXMuc3RhdGUuaXNBY3RpdmU/XCJibG9ja1wiOlwibm9uZVwiLFxuICAgICAgICAgICAgY29sb3I6IFwicGlua1wiLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMzMzNcIixcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17XCJ0b29sdGlwIFwiK3RoaXMuc3RhdGUucG9zaXRpb259PlxuICAgICAgICAgICAgICAgIDxzcGFuIHJlZj1cImNvbnRcIiBvbk1vdXNlT3Zlcj17dGhpcy5oYW5kbGVNb3VzZU92ZXJ9IG9uTW91c2VPdXQ9e3RoaXMuaGFuZGxlTW91c2VPdXR9IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9Pnt0aGlzLnByb3BzLmNoaWxkcmVufTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8ZGl2IG9uTW91c2VPdmVyPXt0aGlzLmhhbmRsZVRpcE1vdXNlT3Zlcn0gb25Nb3VzZU91dD17dGhpcy5oYW5kbGVUaXBNb3VzZU91dH0gY2xhc3NOYW1lPVwidGlwXCIgcmVmPVwidGlwXCIgc3R5bGU9e3RoaXMuZ2V0VGlwU3R5bGUoKX0+e3RoaXMucHJvcHMudGlwfTwvZGl2PlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnXG5cbnZhciBTcGlubmVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImN1LXNwaW5uZXJcIj48L2Rpdj5cbiAgICApO1xuICB9XG59KTtcblxudmFyIFByb2dyZXNzYmFyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHRnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgXHRyYXRlOiBudWxsLFxuICAgIFx0ZG9uZTogZmFsc2VcbiAgICB9O1xuICB9LFxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzcGVlZDogMC42LFxuICAgICAgc3Bpbm5lcjogdHJ1ZSxcbiAgICAgIGVhc2luZzogJ2Vhc2UnLFxuICAgICAgbWF4UmF0ZTogMC45OCxcbiAgICAgIGluY1N0ZXA6IDAuMDQsXG4gICAgICBtaW5TdGVwOiAwLjAwNSxcbiAgICAgIG1heFN0ZXA6IDAuMDMsXG4gICAgICB0cmlja2xlOiB0cnVlLFxuICAgICAgdHJpY2tsZVNwZWVkOiA4MDAsXG4gICAgICBzZXRUcmlja2xlOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIHN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgXHR0aGlzLl9pbml0KCk7XG4gIFx0dGhpcy5zZXQoJzAuNSUnKTtcblx0ICB0aGlzLnByb3BzLnRyaWNrbGUgJiYgdGhpcy5fYXV0b0luYygpO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uKG4sIHRyaWNrbGUpIHtcbiAgXHQhdHJpY2tsZSAmJiB0aGlzLl9pbml0KCk7XG4gIFx0biA9IHRoaXMuX2Zvcm1hdChuKTtcbiAgXHRpZihuID09PSAxMDApIHtcbiAgXHRcdC8qIGRvbmUgKi9cbiAgXHRcdHRoaXMuc2V0U3RhdGUoe1xuICBcdFx0XHRyYXRlOiAxMDBcbiAgXHRcdH0pO1xuICBcdH0gZWxzZSB7XG4gIFx0XHRuID0gbiA+IHRoaXMucHJvcHMubWF4UmF0ZSAqIDEwMCA/IHRoaXMucHJvcHMubWF4UmF0ZSAqIDEwMCA6IG47XG4gIFx0XHR0aGlzLnNldFN0YXRlKHtcbiAgXHRcdFx0cmF0ZTogblxuICBcdFx0fSk7XG4gIFx0fVxuICB9LFxuICBpbmM6IGZ1bmN0aW9uKG4pIHtcbiAgXHR0aGlzLl9pbml0KCk7XG4gIFx0dGhpcy5wcm9wcy50cmlja2xlICYmIHRoaXMuX2F1dG9JbmMoKTtcbiAgXHRuID0gbiA/IHRoaXMuIF9mb3JtYXQobikgOiB0aGlzLnByb3BzLmluY1N0ZXAgKiAxMDA7XG4gIFx0dmFyIG5ld1JhdGUgPSB0aGlzLnN0YXRlLnJhdGUgKyBuO1xuXHRcdHRoaXMuc2V0KG5ld1JhdGUgKyAnJScsIHRydWUpO1xuICB9LFxuICBkb25lOiBmdW5jdGlvbigpIHtcbiAgXHR0aGlzLnNldCgnMTAwJScpO1xuICBcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gIFx0XHR0aGlzLnNldFN0YXRlKHtcbiAgXHRcdFx0ZG9uZTogdHJ1ZVxuICBcdFx0fSk7XG4gIFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgIFx0XHR0aGlzLnNldFN0YXRlKHtcblx0ICBcdFx0XHRyYXRlOiBudWxsXG5cdCAgXHRcdH0pO1xuICBcdFx0fS5iaW5kKHRoaXMpLCB0aGlzLnByb3BzLnNwZWVkICogMiAqIDEwMDApO1xuICBcdH0uYmluZCh0aGlzKSwgdGhpcy5wcm9wcy5zcGVlZCAqIDEwMDApO1xuICB9LFxuICBfZm9ybWF0OiBmdW5jdGlvbihkYXRhKSB7XG4gIFx0aWYodHlwZW9mIGRhdGEgPT09ICdudW1iZXInKSB7XG4gIFx0XHRyZXR1cm4gZGF0YSA+IDEgPyB0aGlzLnByb3MubWF4UmF0ZSAqIDEwMCA6IGRhdGEgKiAxMDA7XG4gIFx0fSBlbHNlIGlmKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICBcdFx0cmV0dXJuIHBhcnNlRmxvYXQoZGF0YSkgPiAxMDAgPyB0aGlzLnByb3BzLm1heFJhdGUgKiAxMDAgOiBwYXJzZUZsb2F0KGRhdGEpO1xuICBcdH0gZWxzZSB7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuICB9LFxuICBfaW5pdDogZnVuY3Rpb24oKSB7XG4gIFx0dGhpcy5zdGF0ZS5kb25lICYmIHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0ZG9uZTogZmFsc2Vcblx0XHR9KTtcblx0XHR0aGlzLnRpbWVyICYmIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcbiAgfSxcbiAgX2F1dG9JbmM6IGZ1bmN0aW9uKCkge1xuICBcdHZhciBuZXdSYXRlO1xuICBcdHZhciByYW5kb207XG5cdFx0dGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmFuZG9tID0gdGhpcy5fZ2V0UmFkb21TdGVwKCk7XG5cdFx0XHRuZXdSYXRlID0gdGhpcy5zdGF0ZS5yYXRlICsgcmFuZG9tO1xuXHRcdFx0Y29uc29sZS5sb2cocmFuZG9tKTtcblx0XHRcdGlmKG5ld1JhdGUgPiB0aGlzLnByb3BzLm1heFJhdGUgKiAxMDApIHtcblx0XHRcdFx0Y29uc29sZS5sb2codGhpcy5wcm9wcy5tYXhSYXRlICogMTAwKTtcblx0XHRcdFx0dGhpcy5fY2xlYXJJbnRlcnZhbCgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRjb25zb2xlLmxvZyhuZXdSYXRlKTtcblx0XHRcdHRoaXMuc2V0KG5ld1JhdGUgKyAnJScsIHRydWUpO1xuXHRcdH0uYmluZCh0aGlzKSwgdGhpcy5wcm9wcy50cmlja2xlU3BlZWQpO1xuXHR9LFxuXHRfY2xlYXJJbnRlcnZhbDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy50aW1lciAmJiBjbGVhckludGVydmFsKHRoaXMudGltZXIpO1xuXHR9LFxuXHRfZ2V0UmFkb21TdGVwOiBmdW5jdGlvbihtaW4sIG1heCkge1xuXHRcdG1pbiA9IG1pbiB8fCB0aGlzLnByb3BzLm1pblN0ZXAgKiAxMDA7XG5cdFx0bWF4ID0gbWF4IHx8IHRoaXMucHJvcHMubWF4U3RlcCAqIDEwMDtcblx0XHRyZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xuXHR9LFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICBcdHZhciBwcm9ncmVzc1N0eWxlID0ge1xuICBcdFx0Ly9kaXNwbGF5OiAoIXRoaXMuc3RhdGUucmF0ZSAmJiB0eXBlb2YgdGhpcy5zdGF0ZS5yYXRlID09PSAnb2JqZWN0JykgPyAnbm9uZScgOiAnYmxvY2snLFxuICBcdFx0b3BhY2l0eTogdGhpcy5zdGF0ZS5kb25lID8gMCA6IDEsXG4gIFx0XHR0cmFuc2l0aW9uOiAnb3BhY2l0eSAnICsgdGhpcy5wcm9wcy5zcGVlZCAqIDIgKyAncyAnICsgdGhpcy5wcm9wcy5lYXNpbmdcbiAgXHR9O1xuICAgIHZhciBiYXJTdHlsZSA9IHtcbiAgXHRcdHdpZHRoOiAhdGhpcy5zdGF0ZS5yYXRlID8gMCA6IHRoaXMuc3RhdGUucmF0ZSArICclJyxcbiAgXHRcdHRyYW5zaXRpb246ICd3aWR0aCAnICsgdGhpcy5wcm9wcy5zcGVlZCArICdzICcgKyB0aGlzLnByb3BzLmVhc2luZ1xuXHRcdH07XG4gIFx0cmV0dXJuIHRoaXMuc3RhdGUucmF0ZSA/IChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3UtcHJvZ3Jlc3NcIiBzdHlsZT17cHJvZ3Jlc3NTdHlsZX0+XG4gICAgICBcdDxkaXYgY2xhc3NOYW1lPVwiY3UtcHJvZ3Jlc3MtYmFyXCIgc3R5bGU9e2JhclN0eWxlfT48L2Rpdj5cbiAgICAgIFx0e3RoaXMucHJvcHMuc3Bpbm5lciA/IDxTcGlubmVyIC8+IDogbnVsbH1cbiAgICAgIDwvZGl2PlxuICAgICkgOiBudWxsO1xuICB9XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
>>>>>>> 3eaaeba4ae0922c0acd21e57ef24fcf338f09e8f
