"use strict";var Spinner=React.createClass({displayName:"Spinner",render:function(){return React.createElement("div",{className:"cu-spinner"})}}),ProgressBar=React.createClass({displayName:"ProgressBar",getInitialState:function(){return{rate:null,done:!1}},getDefaultProps:function(){return{speed:.6,spinner:!0,easing:"ease",maxRate:.96,incStep:.04,minStep:.005,maxStep:.03,trickle:!0,trickleSpeed:800,setTrickle:!1}},start:function(){this._init(),this.set("0.5%"),this.props.trickle&&this._autoInc()},set:function(t,e){!e&&this._init(),t=this._format(t),100===t?this.setState({rate:100}):(t=t>100*this.props.maxRate?100*this.props.maxRate:t,this.setState({rate:t}))},inc:function(t){this._init(),this.props.trickle&&this._autoInc(),t=t?this._format(t):100*this.props.incStep;var e=this.state.rate+t;this.set(e+"%",!0)},done:function(){this.set("100%"),setTimeout(function(){this.setState({done:!0}),setTimeout(function(){this.setState({rate:null})}.bind(this),2*this.props.speed*1e3)}.bind(this),1e3*this.props.speed)},_format:function(t){return"number"==typeof t?t>1?100*this.pros.maxRate:100*t:"string"==typeof t?parseFloat(t)>100?100*this.props.maxRate:parseFloat(t):void 0},_init:function(){this.state.done&&this.setState({done:!1}),this.timer&&this._clearInterval()},_autoInc:function(){var t,e;this.timer=setInterval(function(){return e=this._getRadomStep(),t=this.state.rate+e,console.log(e),t>100*this.props.maxRate?(console.log(100*this.props.maxRate),void this._clearInterval()):(console.log(t),void this.set(t+"%",!0))}.bind(this),this.props.trickleSpeed)},_clearInterval:function(){this.timer&&clearInterval(this.timer)},_getRadomStep:function(t,e){return t=t||100*this.props.minStep,e=e||100*this.props.maxStep,Math.random()*(e-t)+t},render:function(){var t={opacity:this.state.done?0:1,transition:"opacity "+2*this.props.speed+"s "+this.props.easing},e={width:this.state.rate?this.state.rate+"%":0,transition:"width "+this.props.speed+"s "+this.props.easing};return this.state.rate?React.createElement("div",{className:"cu-progress",style:t},React.createElement("div",{className:"cu-progress-bar",style:e}),this.props.spinner?React.createElement(Spinner,null):null):null}}),ToolTip=React.createClass({displayName:"ToolTip",getDefaultProps:function(){return{tip:"tip",trigger:"hover",delay:0,hoverable:!1,position:"tip",width:"200px",type:"span",aHref:"#"}},getInitialState:function(){return{position:this.props.position,isActive:!1,isOnTip:!1,tipHeight:""}},handleMouseOver:function(t){"hover"==this.props.trigger&&this.setState({isActive:!0})},handleMouseOut:function(t){"hover"==this.props.trigger&&setTimeout(function(){return this.state.isOnTip?!1:void this.setState({isActive:!1})}.bind(this),this.props.delay)},handleClick:function(t){"click"==this.props.trigger&&(this.state.isActive?this.setState({isActive:!1}):this.state.isActive||this.setState({isActive:!0}))},handleTipMouseOver:function(t){this.props.hoverable&&(this.setState({isOnTip:!0}),this.setState({isActive:!0}))},handleTipMouseOut:function(t){this.props.hoverable&&(this.setState({isOnTip:!1}),this.setState({isActive:!1}))},componentDidUpdate:function(){this.setTipPosition()},setTipPosition:function(){var t=this.refs.tip.getDOMNode(),e=this.refs.cont.getDOMNode();this.flag||(this.state.tipHeight=t.offsetHeight,this.flag=1);var i=t.offsetWidth,s=t.offsetHeight,o=e.offsetWidth,n=e.offsetHeight;switch(this.state.position){case"left":t.style.top=-(s-n)/2+"px",t.style.left=-(i+20)+"px";break;case"right":t.style.top=-(s-n)/2+"px",t.style.left="100%";break;case"top":t.style.left=-(i-o)/2+"px",t.style.bottom="100%";break;case"bottom":t.style.left=-(i-o)/2+"px",t.style.top="100%";break;default:t.style.top=-(s-n)/2+"px",t.style.left=-(i+20)+"px"}t.style.height=this.state.tipHeight-20+"px",this.prevertTipOverflow()},prevertTipOverflow:function(){var t=this.refs.tip.getDOMNode().getBoundingClientRect().left,e=(this.refs.tip.getDOMNode().getBoundingClientRect().top,this.refs.tip.getDOMNode().offsetWidth),i=(this.refs.tip.getDOMNode().offsetHeight,parseInt(document.body.clientWidth));if(0>t&&t+e>i)return!0;if(0>t){if("left"==this.state.position)return void this.setState({position:"top"});if("top"==this.state.position||"bottom"==this.state.position)return void this.setState({position:"right"})}if(t+e>i){if("right"==this.state.position)return void this.setState({position:"bottom"});if("bottom"==this.state.position||"top"==this.state.position)return void this.setState({position:"left"})}},getTipStyle:function(){return{display:this.state.isActive?"block":"none",color:"pink",backgroundColor:"#333",width:this.props.width}},render:function(){return"span"==this.props.type?React.createElement("span",{className:"tooltip "+this.state.position},React.createElement("span",{ref:"cont",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleClick},this.props.children),React.createElement("div",{onMouseOver:this.handleTipMouseOver,onMouseOut:this.handleTipMouseOut,className:"tip",ref:"tip",style:this.getTipStyle()},this.props.tip)):"a"==this.props.type?React.createElement("span",{className:"tooltip "+this.state.position},React.createElement("a",{href:this.props.aHref,ref:"cont",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleClick},this.props.children),React.createElement("div",{onMouseOver:this.handleTipMouseOver,onMouseOut:this.handleTipMouseOut,className:"tip",ref:"tip",style:this.getTipStyle()},this.props.tip)):"button"==this.props.type?React.createElement("span",{className:"tooltip "+this.state.position},React.createElement("button",{ref:"cont",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleClick},this.props.children),React.createElement("div",{onMouseOver:this.handleTipMouseOver,onMouseOut:this.handleTipMouseOut,className:"tip",ref:"tip",style:this.getTipStyle()},this.props.tip)):void 0}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlByb2dyZXNzQmFyL1Byb2dyZXNzQmFyLmpzeCIsIlRvb2x0aXAvVG9vbHRpcC5qc3giXSwibmFtZXMiOlsiU3Bpbm5lciIsIlJlYWN0IiwiY3JlYXRlQ2xhc3MiLCJkaXNwbGF5TmFtZSIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJQcm9ncmVzc0JhciIsImdldEluaXRpYWxTdGF0ZSIsInJhdGUiLCJkb25lIiwiZ2V0RGVmYXVsdFByb3BzIiwic3BlZWQiLCJzcGlubmVyIiwiZWFzaW5nIiwibWF4UmF0ZSIsImluY1N0ZXAiLCJtaW5TdGVwIiwibWF4U3RlcCIsInRyaWNrbGUiLCJ0cmlja2xlU3BlZWQiLCJzZXRUcmlja2xlIiwic3RhcnQiLCJ0aGlzIiwiX2luaXQiLCJzZXQiLCJwcm9wcyIsIl9hdXRvSW5jIiwibiIsIl9mb3JtYXQiLCJzZXRTdGF0ZSIsImluYyIsIm5ld1JhdGUiLCJzdGF0ZSIsInNldFRpbWVvdXQiLCJiaW5kIiwiZGF0YSIsInByb3MiLCJwYXJzZUZsb2F0IiwidGltZXIiLCJfY2xlYXJJbnRlcnZhbCIsInJhbmRvbSIsInNldEludGVydmFsIiwiX2dldFJhZG9tU3RlcCIsImNvbnNvbGUiLCJsb2ciLCJjbGVhckludGVydmFsIiwibWluIiwibWF4IiwiTWF0aCIsInByb2dyZXNzU3R5bGUiLCJvcGFjaXR5IiwidHJhbnNpdGlvbiIsImJhclN0eWxlIiwid2lkdGgiLCJzdHlsZSIsIlRvb2xUaXAiLCJ0aXAiLCJ0cmlnZ2VyIiwiZGVsYXkiLCJob3ZlcmFibGUiLCJwb3NpdGlvbiIsInR5cGUiLCJhSHJlZiIsImlzQWN0aXZlIiwiaXNPblRpcCIsInRpcEhlaWdodCIsImhhbmRsZU1vdXNlT3ZlciIsImUiLCJoYW5kbGVNb3VzZU91dCIsImhhbmRsZUNsaWNrIiwiaGFuZGxlVGlwTW91c2VPdmVyIiwiaGFuZGxlVGlwTW91c2VPdXQiLCJjb21wb25lbnREaWRVcGRhdGUiLCJzZXRUaXBQb3NpdGlvbiIsInJlZnMiLCJnZXRET01Ob2RlIiwiY29udCIsImZsYWciLCJvZmZzZXRIZWlnaHQiLCJ0aXBXaWR0aCIsIm9mZnNldFdpZHRoIiwiY29udFdpZHRoIiwiY29udEhlaWdodCIsInRvcCIsImxlZnQiLCJib3R0b20iLCJoZWlnaHQiLCJwcmV2ZXJ0VGlwT3ZlcmZsb3ciLCJ0aXBYIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYXZhaWxXaWR0aCIsInBhcnNlSW50IiwiZG9jdW1lbnQiLCJib2R5IiwiY2xpZW50V2lkdGgiLCJnZXRUaXBTdHlsZSIsImRpc3BsYXkiLCJjb2xvciIsImJhY2tncm91bmRDb2xvciIsInJlZiIsIm9uTW91c2VPdmVyIiwib25Nb3VzZU91dCIsIm9uQ2xpY2siLCJjaGlsZHJlbiIsImhyZWYiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUEsSUFBSUEsU0FBQUMsTUFBQUMsYUFBNkJDLFlBQUEsVUFDL0JDLE9BQVEsV0FDTixNQUNFSCxPQUFBSSxjQUFBLE9BQUlDLFVBQUMsa0JBS1BDLFlBQUFOLE1BQUFDLGFBQWlDQyxZQUFBLGNBQ25DSyxnQkFBaUIsV0FDZixPQUNFQyxLQUFNLEtBQ05DLE1BQU0sSUFHVkMsZ0JBQWlCLFdBQ2YsT0FDRUMsTUFBTyxHQUNQQyxTQUFTLEVBQ1RDLE9BQVEsT0FDUkMsUUFBUyxJQUNUQyxRQUFTLElBQ1RDLFFBQVMsS0FDVEMsUUFBUyxJQUNUQyxTQUFTLEVBQ1RDLGFBQWMsSUFDZEMsWUFBWSxJQUdoQkMsTUFBTyxXQUNMQyxLQUFLQyxRQUNMRCxLQUFLRSxJQUFJLFFBQ1RGLEtBQUtHLE1BQU1QLFNBQVdJLEtBQUtJLFlBRTdCRixJQUFLLFNBQVNHLEVBQUdULElBQ2RBLEdBQVdJLEtBQUtDLFFBQ2pCSSxFQUFJTCxLQUFLTSxRQUFRRCxHQUNQLE1BQU5BLEVBRUZMLEtBQUtPLFVBQ0hyQixLQUFNLE9BR1JtQixFQUFJQSxFQUF5QixJQUFyQkwsS0FBS0csTUFBTVgsUUFDTSxJQUFyQlEsS0FBS0csTUFBTVgsUUFDWGEsRUFDSkwsS0FBS08s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TW9DLEtBRU43RCxNQUFBSSxjQUFBLFFBQUtDLFVBQUMsV0FBV2lCLEtBQVdVLE1BQUs0QixVQUM3QjVELE1BQUFJLGNBQUEsVUFBTytGLElBQUMsT0FBSUMsWUFBTzlFLEtBQWE0QyxnQkFBS21DLFdBQWlCL0UsS0FBVThDLGVBQU9rQyxRQUFnQmhGLEtBQUErQyxhQUFjL0MsS0FBYUcsTUFBQzhFLFVBQ25IdkcsTUFBQUksY0FBQSxPQUFJZ0csWUFBQzlFLEtBQWFnRCxtQkFBdUIrQixXQUFFL0UsS0FBWWlELGtCQUFLbEUsVUFBbUIsTUFBVThGLElBQUEsTUFBUzdDLE1BQUNoQyxLQUFNeUUsZUFBWXpFLEtBQVdHLE1BQUsrQixNQUpqSiIsImZpbGUiOiJDaGFybS1VSS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG52YXIgU3Bpbm5lciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdS1zcGlubmVyXCI+PC9kaXY+XG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBQcm9ncmVzc0JhciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmF0ZTogbnVsbCxcbiAgICAgIGRvbmU6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3BlZWQ6IDAuNixcbiAgICAgIHNwaW5uZXI6IHRydWUsXG4gICAgICBlYXNpbmc6ICdlYXNlJyxcbiAgICAgIG1heFJhdGU6IDAuOTYsXG4gICAgICBpbmNTdGVwOiAwLjA0LFxuICAgICAgbWluU3RlcDogMC4wMDUsXG4gICAgICBtYXhTdGVwOiAwLjAzLFxuICAgICAgdHJpY2tsZTogdHJ1ZSxcbiAgICAgIHRyaWNrbGVTcGVlZDogODAwLFxuICAgICAgc2V0VHJpY2tsZTogZmFsc2VcbiAgICB9O1xuICB9LFxuICBzdGFydDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5faW5pdCgpO1xuICAgIHRoaXMuc2V0KCcwLjUlJyk7XG4gICAgdGhpcy5wcm9wcy50cmlja2xlICYmIHRoaXMuX2F1dG9JbmMoKTtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihuLCB0cmlja2xlKSB7XG4gICAgIXRyaWNrbGUgJiYgdGhpcy5faW5pdCgpO1xuICAgIG4gPSB0aGlzLl9mb3JtYXQobik7XG4gICAgaWYgKG4gPT09IDEwMCkge1xuICAgICAgLyogZG9uZSAqL1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHJhdGU6IDEwMFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG4gPSBuID4gdGhpcy5wcm9wcy5tYXhSYXRlICogMTAwXG4gICAgICAgID8gdGhpcy5wcm9wcy5tYXhSYXRlICogMTAwXG4gICAgICAgIDogbjtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICByYXRlOiBuXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIGluYzogZnVuY3Rpb24obikge1xuICAgIHRoaXMuX2luaXQoKTtcbiAgICB0aGlzLnByb3BzLnRyaWNrbGUgJiYgdGhpcy5fYXV0b0luYygpO1xuICAgIG4gPSBuXG4gICAgICA/IHRoaXMuX2Zvcm1hdChuKVxuICAgICAgOiB0aGlzLnByb3BzLmluY1N0ZXAgKiAxMDA7XG4gICAgdmFyIG5ld1JhdGUgPSB0aGlzLnN0YXRlLnJhdGUgKyBuO1xuICAgIHRoaXMuc2V0KG5ld1JhdGUgKyAnJScsIHRydWUpO1xuICB9LFxuICBkb25lOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldCgnMTAwJScpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZG9uZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICByYXRlOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgfS5iaW5kKHRoaXMpLCB0aGlzLnByb3BzLnNwZWVkICogMiAqIDEwMDApO1xuICAgIH0uYmluZCh0aGlzKSwgdGhpcy5wcm9wcy5zcGVlZCAqIDEwMDApO1xuICB9LFxuICBfZm9ybWF0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIGRhdGEgPiAxXG4gICAgICAgID8gdGhpcy5wcm9zLm1heFJhdGUgKiAxMDBcbiAgICAgICAgOiBkYXRhICogMTAwO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChkYXRhKSA+IDEwMFxuICAgICAgICA/IHRoaXMucHJvcHMubWF4UmF0ZSAqIDEwMFxuICAgICAgICA6IHBhcnNlRmxvYXQoZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIF9pbml0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0YXRlLmRvbmUgJiYgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBkb25lOiBmYWxzZVxuICAgIH0pO1xuICAgIHRoaXMudGltZXIgJiYgdGhpcy5fY2xlYXJJbnRlcnZhbCgpO1xuICB9LFxuICBfYXV0b0luYzogZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1JhdGU7XG4gICAgdmFyIHJhbmRvbTtcbiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICByYW5kb20gPSB0aGlzLl9nZXRSYWRvbVN0ZXAoKTtcbiAgICAgIG5ld1JhdGUgPSB0aGlzLnN0YXRlLnJhdGUgKyByYW5kb207XG4gICAgICBjb25zb2xlLmxvZyhyYW5kb20pO1xuICAgICAgaWYgKG5ld1JhdGUgPiB0aGlzLnByb3BzLm1heFJhdGUgKiAxMDApIHtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5wcm9wcy5tYXhSYXRlICogMTAwKTtcbiAgICAgICAgdGhpcy5fY2xlYXJJbnRlcnZhbCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhuZXdSYXRlKTtcbiAgICAgIHRoaXMuc2V0KG5ld1JhdGUgKyAnJScsIHRydWUpO1xuICAgIH0uYmluZCh0aGlzKSwgdGhpcy5wcm9wcy50cmlja2xlU3BlZWQpO1xuICB9LFxuICBfY2xlYXJJbnRlcnZhbDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy50aW1lciAmJiBjbGVhckludGVydmFsKHRoaXMudGltZXIpO1xuICB9LFxuICBfZ2V0UmFkb21TdGVwOiBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIG1pbiA9IG1pbiB8fCB0aGlzLnByb3BzLm1pblN0ZXAgKiAxMDA7XG4gICAgbWF4ID0gbWF4IHx8IHRoaXMucHJvcHMubWF4U3RlcCAqIDEwMDtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwcm9ncmVzc1N0eWxlID0ge1xuICAgICAgLy9kaXNwbGF5OiAoIXRoaXMuc3RhdGUucmF0ZSAmJiB0eXBlb2YgdGhpcy5zdGF0ZS5yYXRlID09PSAnb2JqZWN0JykgPyAnbm9uZScgOiAnYmxvY2snLFxuICAgICAgb3BhY2l0eTogdGhpcy5zdGF0ZS5kb25lXG4gICAgICAgID8gMFxuICAgICAgICA6IDEsXG4gICAgICB0cmFuc2l0aW9uOiAnb3BhY2l0eSAnICsgdGhpcy5wcm9wcy5zcGVlZCAqIDIgKyAncyAnICsgdGhpcy5wcm9wcy5lYXNpbmdcbiAgICB9O1xuICAgIHZhciBiYXJTdHlsZSA9IHtcbiAgICAgIHdpZHRoOiAhdGhpcy5zdGF0ZS5yYXRlXG4gICAgICAgID8gMFxuICAgICAgICA6IHRoaXMuc3RhdGUucmF0ZSArICclJyxcbiAgICAgIHRyYW5zaXRpb246ICd3aWR0aCAnICsgdGhpcy5wcm9wcy5zcGVlZCArICdzICcgKyB0aGlzLnByb3BzLmVhc2luZ1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUucmF0ZVxuICAgICAgPyAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3UtcHJvZ3Jlc3NcIiBzdHlsZT17cHJvZ3Jlc3NTdHlsZX0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdS1wcm9ncmVzcy1iYXJcIiBzdHlsZT17YmFyU3R5bGV9PjwvZGl2PlxuICAgICAgICAgIHt0aGlzLnByb3BzLnNwaW5uZXJcbiAgICAgICAgICAgID8gPFNwaW5uZXIvPlxuICAgICAgICAgICAgOiBudWxsfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICAgIDogbnVsbDtcbiAgfVxufSk7XG4iLCJ2YXIgVG9vbFRpcCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGlwOiBcInRpcFwiLFxuICAgICAgICAgICAgdHJpZ2dlcjogJ2hvdmVyJyxcbiAgICAgICAgICAgIGRlbGF5OiAwLFxuICAgICAgICAgICAgaG92ZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcInRpcFwiLFxuICAgICAgICAgICAgd2lkdGg6IFwiMjAwcHhcIixcbiAgICAgICAgICAgIHR5cGU6ICdzcGFuJyxcbiAgICAgICAgICAgIGFIcmVmOiBcIiNcIlxuICAgICAgICB9O1xuICAgIH0sXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLnByb3BzLnBvc2l0aW9uLFxuICAgICAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICAgICAgaXNPblRpcDogZmFsc2UsXG4gICAgICAgICAgICB0aXBIZWlnaHQ6IFwiXCJcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGhhbmRsZU1vdXNlT3ZlcjogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZih0aGlzLnByb3BzLnRyaWdnZXI9PVwiaG92ZXJcIikge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNBY3RpdmU6IHRydWV9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaGFuZGxlTW91c2VPdXQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYodGhpcy5wcm9wcy50cmlnZ2VyPT1cImhvdmVyXCIpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5pc09uVGlwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNBY3RpdmU6IGZhbHNlfSk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcykgLCB0aGlzLnByb3BzLmRlbGF5KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYodGhpcy5wcm9wcy50cmlnZ2VyPT1cImNsaWNrXCIpIHtcbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0FjdGl2ZTogZmFsc2V9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZighdGhpcy5zdGF0ZS5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQWN0aXZlOiB0cnVlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGhhbmRsZVRpcE1vdXNlT3ZlcjogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZih0aGlzLnByb3BzLmhvdmVyYWJsZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNPblRpcDogdHJ1ZX0pO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNBY3RpdmU6IHRydWV9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaGFuZGxlVGlwTW91c2VPdXQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYodGhpcy5wcm9wcy5ob3ZlcmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzT25UaXA6IGZhbHNlfSk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0FjdGl2ZTogZmFsc2V9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZXRUaXBQb3NpdGlvbigpO1xuICAgIH0sXG4gICAgc2V0VGlwUG9zaXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdGlwID0gdGhpcy5yZWZzLnRpcC5nZXRET01Ob2RlKCk7XG4gICAgICAgIHZhciBjb250ID0gdGhpcy5yZWZzLmNvbnQuZ2V0RE9NTm9kZSgpO1xuICAgICAgICBpZighdGhpcy5mbGFnKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnRpcEhlaWdodCA9IHRpcC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLmZsYWcgPSAxO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aXBXaWR0aCA9IHRpcC5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIHRpcEhlaWdodCA9IHRpcC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIHZhciBjb250V2lkdGggPSBjb250Lm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgY29udEhlaWdodCA9IGNvbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUucG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgXCJsZWZ0XCI6dGlwLnN0eWxlLnRvcCA9IC0odGlwSGVpZ2h0LWNvbnRIZWlnaHQpLzIrXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlwLnN0eWxlLmxlZnQgPSAtKHRpcFdpZHRoKzIwKStcInB4XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmlnaHRcIjp0aXAuc3R5bGUudG9wID0gLSh0aXBIZWlnaHQtY29udEhlaWdodCkvMitcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXAuc3R5bGUubGVmdCA9IFwiMTAwJVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInRvcFwiOnRpcC5zdHlsZS5sZWZ0ID0gLSh0aXBXaWR0aC1jb250V2lkdGgpLzIrXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlwLnN0eWxlLmJvdHRvbSA9IFwiMTAwJVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImJvdHRvbVwiOnRpcC5zdHlsZS5sZWZ0ID0gLSh0aXBXaWR0aC1jb250V2lkdGgpLzIrXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlwLnN0eWxlLnRvcCA9IFwiMTAwJVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDogdGlwLnN0eWxlLnRvcCA9IC0odGlwSGVpZ2h0LWNvbnRIZWlnaHQpLzIrXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICB0aXAuc3R5bGUubGVmdCA9IC0odGlwV2lkdGgrMjApK1wicHhcIjtcbiAgICAgICAgfVxuICAgICAgICB0aXAuc3R5bGUuaGVpZ2h0ID0gdGhpcy5zdGF0ZS50aXBIZWlnaHQtMjArXCJweFwiO1xuICAgICAgICB0aGlzLnByZXZlcnRUaXBPdmVyZmxvdygpO1xuICAgIH0sXG4gICAgcHJldmVydFRpcE92ZXJmbG93OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHRpcFggPSB0aGlzLnJlZnMudGlwLmdldERPTU5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICAgICAgICB2YXIgdGlwWSA9IHRoaXMucmVmcy50aXAuZ2V0RE9NTm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICAgICAgdmFyIHRpcFdpZHRoID0gdGhpcy5yZWZzLnRpcC5nZXRET01Ob2RlKCkub2Zmc2V0V2lkdGg7XG4gICAgICAgIHZhciB0aXBIZWlnaHQgPSB0aGlzLnJlZnMudGlwLmdldERPTU5vZGUoKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIHZhciBhdmFpbFdpZHRoID0gcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCk7XG4gICAgICAgIGlmKHRpcFggPCAwICYmIHRpcFgrdGlwV2lkdGggPiBhdmFpbFdpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZih0aXBYIDwgMCkge1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5wb3NpdGlvbiA9PSBcImxlZnRcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3Bvc2l0aW9uOiBcInRvcFwifSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUucG9zaXRpb24gPT0gXCJ0b3BcIiB8fCB0aGlzLnN0YXRlLnBvc2l0aW9uID09IFwiYm90dG9tXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtwb3NpdGlvbjogXCJyaWdodFwifSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZih0aXBYK3RpcFdpZHRoID4gYXZhaWxXaWR0aCkge1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5wb3NpdGlvbiA9PSBcInJpZ2h0XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtwb3NpdGlvbjogXCJib3R0b21cIn0pO1xuICAgICAgICAgICAgICAgIHJldHVybiA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih0aGlzLnN0YXRlLnBvc2l0aW9uID09IFwiYm90dG9tXCIgfHwgdGhpcy5zdGF0ZS5wb3NpdGlvbiA9PSBcInRvcFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cG9zaXRpb246IFwibGVmdFwifSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSxcbiAgICBnZXRUaXBTdHlsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkaXNwbGF5OiB0aGlzLnN0YXRlLmlzQWN0aXZlP1wiYmxvY2tcIjpcIm5vbmVcIixcbiAgICAgICAgICAgIGNvbG9yOiBcInBpbmtcIixcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjMzMzXCIsXG4gICAgICAgICAgICB3aWR0aDogdGhpcy5wcm9wcy53aWR0aCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKHRoaXMucHJvcHMudHlwZT09XCJzcGFuXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtcInRvb2x0aXAgXCIrdGhpcy5zdGF0ZS5wb3NpdGlvbn0+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHJlZj1cImNvbnRcIiBvbk1vdXNlT3Zlcj17dGhpcy5oYW5kbGVNb3VzZU92ZXJ9IG9uTW91c2VPdXQ9e3RoaXMuaGFuZGxlTW91c2VPdXR9IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9Pnt0aGlzLnByb3BzLmNoaWxkcmVufTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBvbk1vdXNlT3Zlcj17dGhpcy5oYW5kbGVUaXBNb3VzZU92ZXJ9IG9uTW91c2VPdXQ9e3RoaXMuaGFuZGxlVGlwTW91c2VPdXR9IGNsYXNzTmFtZT1cInRpcFwiIHJlZj1cInRpcFwiIHN0eWxlPXt0aGlzLmdldFRpcFN0eWxlKCl9Pnt0aGlzLnByb3BzLnRpcH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMucHJvcHMudHlwZT09XCJhXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtcInRvb2x0aXAgXCIrdGhpcy5zdGF0ZS5wb3NpdGlvbn0+XG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e3RoaXMucHJvcHMuYUhyZWZ9IHJlZj1cImNvbnRcIiBvbk1vdXNlT3Zlcj17dGhpcy5oYW5kbGVNb3VzZU92ZXJ9IG9uTW91c2VPdXQ9e3RoaXMuaGFuZGxlTW91c2VPdXR9IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9Pnt0aGlzLnByb3BzLmNoaWxkcmVufTwvYT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBvbk1vdXNlT3Zlcj17dGhpcy5oYW5kbGVUaXBNb3VzZU92ZXJ9IG9uTW91c2VPdXQ9e3RoaXMuaGFuZGxlVGlwTW91c2VPdXR9IGNsYXNzTmFtZT1cInRpcFwiIHJlZj1cInRpcFwiIHN0eWxlPXt0aGlzLmdldFRpcFN0eWxlKCl9Pnt0aGlzLnByb3BzLnRpcH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMucHJvcHMudHlwZT09XCJidXR0b25cIikge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e1widG9vbHRpcCBcIit0aGlzLnN0YXRlLnBvc2l0aW9ufT5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiByZWY9XCJjb250XCIgb25Nb3VzZU92ZXI9e3RoaXMuaGFuZGxlTW91c2VPdmVyfSBvbk1vdXNlT3V0PXt0aGlzLmhhbmRsZU1vdXNlT3V0fSBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfT57dGhpcy5wcm9wcy5jaGlsZHJlbn08L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBvbk1vdXNlT3Zlcj17dGhpcy5oYW5kbGVUaXBNb3VzZU92ZXJ9IG9uTW91c2VPdXQ9e3RoaXMuaGFuZGxlVGlwTW91c2VPdXR9IGNsYXNzTmFtZT1cInRpcFwiIHJlZj1cInRpcFwiIHN0eWxlPXt0aGlzLmdldFRpcFN0eWxlKCl9Pnt0aGlzLnByb3BzLnRpcH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=