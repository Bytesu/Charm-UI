var foo=1;console.log(foo);var Spinner=React.createClass({displayName:"Spinner",render:function(){return React.createElement("div",{className:"cu-spinner"})}}),Progressbar=React.createClass({displayName:"Progressbar",getInitialState:function(){return{rate:0,done:!1,hide:!1}},getDefaultProps:function(){return{speed:.2,spinner:!0,easing:"ease",startReset:!1,maxRate:.996,incStep:.04,trickle:!0,trickleSpeed:800}},start:function(){this._init(),this.inc()},set:function(t){t=this._format(t),100===t?(this.setState({rate:100}),setTimeout(function(){this.setState({hide:!0}),setTimeout(function(){this.setState({rate:0,done:!0})}.bind(this),2*this.props.speed*1e3)}.bind(this),1e3*this.props.speed)):(this._init(),this.setState({rate:t}))},inc:function(t){var e=this.state.rate;console.log(e),t=this._format(t||this.props.incStep),100!==this.state.rate&&e+t<100*this.props.maxRate&&(e+=t,this.set(e/100),this.props.trickle&&this._autoInc(e))},done:function(){this.set(1)},_format:function(t){return"number"==typeof t?100*t:"string"==typeof t?parseFloat(t):void 0},_autoInc:function(t){setTimeout(function(){100!==this.state.rate&&this.inc((5*Math.random()+1)/100)}.bind(this),this.props.trickleSpeed)},_init:function(){this.setState({done:!1,hide:!1})},render:function(){var t={width:this.state.rate+"%",transition:"width "+this.props.speed+"s "+this.props.easing+" ,opacity "+2*this.props.speed+"s "+this.props.easing},e={display:this.state.done?"none":"block",transition:"opacity "+2*this.props.speed+"s "+this.props.easing,opacity:!this.state.rate||this.state.hide?0:1};return React.createElement("div",{className:"cu-progress",style:e},React.createElement("div",{className:"cu-progress-bar",style:t}),this.props.spinner?React.createElement(Spinner,null):null)}}),Spinner=React.createClass({displayName:"Spinner",render:function(){return React.createElement("div",{className:"cu-spinner"})}}),Progressbar=React.createClass({displayName:"Progressbar",getInitialState:function(){return{rate:null,done:!1}},getDefaultProps:function(){return{speed:.2,spinner:!0,easing:"ease",maxRate:.9996,incStep:.04,minStep:.02,maxStep:.06,trickle:!0,trickleSpeed:800,setTrickle:!1}},start:function(){this._init(),this.set("1%"),this.props.trickle&&this._autoInc()},set:function(t,e){!e&&this._init(),t=this._format(t),100===t?this.setState({rate:100}):(t=t>100*this.props.maxRate?100*this.props.maxRate:t,this.setState({rate:t}))},inc:function(t){this._init(),this.props.trickle&&this._autoInc(),t=t?this._format(t):100*this.props.incStep;var e=this.state.rate+t;this.set(e+"%",!0)},done:function(){this.set("100%"),setTimeout(function(){this.setState({done:!0}),setTimeout(function(){this.setState({rate:null})}.bind(this),2*this.props.speed*1e3)}.bind(this),1e3*this.props.speed)},_format:function(t){return"number"==typeof t?t>1?100*this.pros.maxRate:100*t:"string"==typeof t?parseFloat(t)>100?100*this.props.maxRate:parseFloat(t):void 0},_init:function(){this.state.done&&this.setState({done:!1}),this.timer&&this._clearInterval()},_autoInc:function(){var t,e;this.timer=setInterval(function(){return e=this._getRadomStep(),t=this.state.rate+e,console.log(e),t>100*this.props.maxRate?(console.log(100*this.props.maxRate),void this._clearInterval()):(console.log(t),void this.set(t+"%",!0))}.bind(this),this.props.trickleSpeed)},_clearInterval:function(){this.timer&&clearInterval(this.timer)},_getRadomStep:function(t,e){return t=t||100*this.props.minStep,e=e||100*this.props.maxStep,Math.random()*(e-t)+t},render:function(){var t={opacity:this.state.done?0:1,transition:"opacity "+2*this.props.speed+"s "+this.props.easing},e={width:this.state.rate?this.state.rate+"%":0,transition:"width "+this.props.speed+"s "+this.props.easing};return this.state.rate?React.createElement("div",{className:"cu-progress",style:t},React.createElement("div",{className:"cu-progress-bar",style:e}),this.props.spinner?React.createElement(Spinner,null):null):null}}),ToolTip=React.createClass({displayName:"ToolTip",getInitialState:function(){return{position:this.props.position,isActive:!1,isOnTip:!1,tipHeight:""}},handleMouseOver:function(t){"hover"==this.props.trigger&&this.setState({isActive:!0})},handleMouseOut:function(t){"hover"==this.props.trigger&&setTimeout(function(){return this.state.isOnTip?!1:void this.setState({isActive:!1})}.bind(this),this.props.delay)},handleClick:function(t){"click"==this.props.trigger&&(this.state.isActive?this.setState({isActive:!1}):this.state.isActive||this.setState({isActive:!0}))},handleTipMouseOver:function(t){this.props.hoverable&&(this.setState({isOnTip:!0}),this.setState({isActive:!0}))},handleTipMouseOut:function(t){this.props.hoverable&&(this.setState({isOnTip:!1}),this.setState({isActive:!1}))},componentDidUpdate:function(){this.setTipPosition()},setTipPosition:function(){var t=this.refs.tip.getDOMNode(),e=this.refs.cont.getDOMNode();this.flag||(this.state.tipHeight=t.offsetHeight,this.flag=1);var i=t.offsetWidth,s=t.offsetHeight,n=e.offsetWidth,o=e.offsetHeight;switch(this.state.position){case"left":t.style.top=-(s-o)/2+"px",t.style.left=-(i+20)+"px";break;case"right":t.style.top=-(s-o)/2+"px",t.style.left="100%";break;case"top":t.style.left=-(i-n)/2+"px",t.style.bottom="100%";break;case"bottom":t.style.left=-(i-n)/2+"px",t.style.top="100%"}t.style.height=this.state.tipHeight-20+"px",this.prevertTipOverflow()},prevertTipOverflow:function(){var t=this.refs.tip.getDOMNode().getBoundingClientRect().left,e=(this.refs.tip.getDOMNode().getBoundingClientRect().top,this.refs.tip.getDOMNode().offsetWidth),i=(this.refs.tip.getDOMNode().offsetHeight,parseInt(document.body.clientWidth));if(0>t&&t+e>i)return!0;if(0>t){if("left"==this.state.position)return void this.setState({position:"top"});if("top"==this.state.position||"bottom"==this.state.position)return void this.setState({position:"right"})}if(t+e>i){if("right"==this.state.position)return void this.setState({position:"bottom"});if("bottom"==this.state.position||"top"==this.state.position)return void this.setState({position:"left"})}},getTipStyle:function(){return{display:this.state.isActive?"block":"none",color:"pink",backgroundColor:"#333",width:this.props.width}},render:function(){return React.createElement("span",{className:"tooltip "+this.state.position},React.createElement("span",{ref:"cont",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleClick},this.props.children),React.createElement("div",{onMouseOver:this.handleTipMouseOver,onMouseOut:this.handleTipMouseOut,className:"tip",ref:"tip",style:this.getTipStyle()},this.props.tip))}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbHRlci1ncm91cC9maWx0ZXItZ3JvdXAuanN4IiwicHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXItMS5qc3giLCJwcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5qc3giLCJ0b29sdGlwL3Rvb2x0aXAuanN4Il0sIm5hbWVzIjpbImZvbyIsImNvbnNvbGUiLCJsb2ciLCJTcGlubmVyIiwiUmVhY3QiLCJjcmVhdGVDbGFzcyIsImRpc3BsYXlOYW1lIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIlByb2dyZXNzYmFyIiwiZ2V0SW5pdGlhbFN0YXRlIiwicmF0ZSIsImRvbmUiLCJoaWRlIiwiZ2V0RGVmYXVsdFByb3BzIiwic3BlZWQiLCJzcGlubmVyIiwiZWFzaW5nIiwic3RhcnRSZXNldCIsIm1heFJhdGUiLCJpbmNTdGVwIiwidHJpY2tsZSIsInRyaWNrbGVTcGVlZCIsInN0YXJ0IiwidGhpcyIsIl9pbml0IiwiaW5jIiwic2V0IiwibiIsIl9mb3JtYXQiLCJzZXRTdGF0ZSIsInNldFRpbWVvdXQiLCJiaW5kIiwicHJvcHMiLCJzdGF0ZSIsIl9hdXRvSW5jIiwiZGF0YSIsInBhcnNlRmxvYXQiLCJNYXRoIiwicmFuZG9tIiwiYmFyU3R5bGUiLCJ3aWR0aCIsInRyYW5zaXRpb24iLCJwcm9ncmVzc1N0eWxlIiwiZGlzcGxheSIsIm9wYWNpdHkiLCJzdHlsZSIsIm1pblN0ZXAiLCJtYXhTdGVwIiwic2V0VHJpY2tsZSIsIm5ld1JhdGUiLCJwcm9zIiwidGltZXIiLCJfY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiX2dldFJhZG9tU3RlcCIsImNsZWFySW50ZXJ2YWwiLCJtaW4iLCJtYXgiLCJUb29sVGlwIiwicG9zaXRpb24iLCJpc0FjdGl2ZSIsImlzT25UaXAiLCJ0aXBIZWlnaHQiLCJoYW5kbGVNb3VzZU92ZXIiLCJlIiwidHJpZ2dlciIsImhhbmRsZU1vdXNlT3V0IiwiZGVsYXkiLCJoYW5kbGVDbGljayIsImhhbmRsZVRpcE1vdXNlT3ZlciIsImhvdmVyYWJsZSIsImhhbmRsZVRpcE1vdXNlT3V0IiwiY29tcG9uZW50RGlkVXBkYXRlIiwic2V0VGlwUG9zaXRpb24iLCJ0aXAiLCJyZWZzIiwiZ2V0RE9NTm9kZSIsImNvbnQiLCJmbGFnIiwib2Zmc2V0SGVpZ2h0IiwidGlwV2lkdGgiLCJvZmZzZXRXaWR0aCIsImNvbnRXaWR0aCIsImNvbnRIZWlnaHQiLCJ0b3AiLCJsZWZ0IiwiYm90dG9tIiwiaGVpZ2h0IiwicHJldmVydFRpcE92ZXJmbG93IiwidGlwWCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImF2YWlsV2lkdGgiLCJwYXJzZUludCIsImRvY3VtZW50IiwiYm9keSIsImNsaWVudFdpZHRoIiwiZ2V0VGlwU3R5bGUiLCJjb2xvciIsImJhY2tncm91bmRDb2xvciIsInJlZiIsIm9uTW91c2VPdmVyIiwib25Nb3VzZU91dCIsIm9uQ2xpY2siLCJjaGlsZHJlbiJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsS0FBTSxDQUNWQyxTQUFRQyxJQUFJRixJQ0NaLElBQUlHLFNBQUFDLE1BQUFDLGFBQTZCQyxZQUFBLFVBQy9CQyxPQUFRLFdBQ04sTUFDRUgsT0FBQUksY0FBQSxPQUFJQyxVQUFDLGtCQUtQQyxZQUFBTixNQUFBQyxhQUFpQ0MsWUFBQSxjQUNwQ0ssZ0JBQWlCLFdBQ2QsT0FDQ0MsS0FBTSxFQUNOQyxNQUFNLEVBQ05DLE1BQU0sSUFHVEMsZ0JBQWlCLFdBQ2YsT0FDRUMsTUFBTyxHQUNQQyxTQUFTLEVBQ1RDLE9BQVEsT0FDUkMsWUFBWSxFQUNaQyxRQUFTLEtBQ1RDLFFBQVMsSUFDVEMsU0FBUyxFQUNUQyxhQUFjLE1BR2xCQyxNQUFPLFdBQ05DLEtBQUtDLFFBRUxELEtBQUtFLE9BRU5DLElBQUssU0FBU0MsR0FDYkEsRUFBSUosS0FBS0ssUUFBUUQsR0FDUixNQUFOQSxHQUVGSixLQUFLTSxVQUNKbkIsS0FBTSxNQUVQb0IsV0FBVyxXQUNWUCxLQUFLTSxVQUNKakIsTUFBTSxJQUVQa0IsV0FBVyxXQUNWUCxL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S0FBYXdDLGdCQUFLc0MsV0FBaUI5RSxLQUFVMkMsZUFBT29DLFFBQWdCL0UsS0FBQTZDLGFBQWM3QyxLQUFhUyxNQUFDdUUsVUFDakhyRyxNQUFBSSxjQUFBLE9BQUk4RixZQUFDN0UsS0FBYThDLG1CQUF1QmdDLFdBQUU5RSxLQUFZZ0Qsa0JBQUtoRSxVQUFtQixNQUFVNEYsSUFBQSxNQUFTdEQsTUFBQ3RCLEtBQU15RSxlQUFZekUsS0FBV1MsTUFBSzBDIiwiZmlsZSI6IkNoYXJtLVVJLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGZvbyA9IDE7XHJcbmNvbnNvbGUubG9nKGZvbyk7XHJcbiIsIid1c2Ugc3RyaWN0J1xyXG5cclxudmFyIFNwaW5uZXIgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3Utc3Bpbm5lclwiPjwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcbn0pO1xyXG5cclxudmFyIFByb2dyZXNzYmFyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG5cdGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgXHRyYXRlOiAwLFxyXG4gICAgXHRkb25lOiBmYWxzZSxcclxuICAgIFx0aGlkZTogZmFsc2VcclxuICAgIH07XHJcbiAgfSxcclxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3BlZWQ6IC4yLFxyXG4gICAgICBzcGlubmVyOiB0cnVlLFxyXG4gICAgICBlYXNpbmc6ICdlYXNlJyxcclxuICAgICAgc3RhcnRSZXNldDogZmFsc2UsXHJcbiAgICAgIG1heFJhdGU6IC45OTYsXHJcbiAgICAgIGluY1N0ZXA6IC4wNCxcclxuICAgICAgdHJpY2tsZTogdHJ1ZSxcclxuICAgICAgdHJpY2tsZVNwZWVkOiA4MDBcclxuICAgIH07XHJcbiAgfSxcclxuICBzdGFydDogZnVuY3Rpb24oKSB7XHJcbiAgXHR0aGlzLl9pbml0KCk7XHJcbi8vXHR0aGlzLnByb3BzLnN0YXJ0UmVzZXQgfHwgIXRoaXMuc3RhdGUucmF0ZSAmJiB0aGlzLnNldCgwKTtcclxuICBcdHRoaXMuaW5jKCk7XHJcbiAgfSxcclxuICBzZXQ6IGZ1bmN0aW9uKG4pIHtcclxuICBcdG4gPSB0aGlzLl9mb3JtYXQobik7XHJcbiAgXHRpZihuID09PSAxMDApIHtcclxuICBcdFx0LyogZG9uZSAqL1xyXG5cdCAgXHR0aGlzLnNldFN0YXRlKHtcclxuXHQgIFx0XHRyYXRlOiAxMDBcclxuXHQgIFx0fSk7XHJcbiAgXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICBcdFx0XHR0aGlzLnNldFN0YXRlKHtcclxuXHRcdCAgXHRcdGhpZGU6IHRydWVcclxuXHRcdCAgXHR9KTtcclxuXHRcdCAgXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICBcdFx0XHR0aGlzLnNldFN0YXRlKHtcclxuXHQgIFx0XHRcdFx0cmF0ZTogMCxcclxuXHRcdFx0ICBcdFx0ZG9uZTogdHJ1ZVxyXG5cdFx0XHQgIFx0fSk7XHJcblx0ICBcdFx0fS5iaW5kKHRoaXMpLCB0aGlzLnByb3BzLnNwZWVkICogMiAqIDEwMDApO1xyXG4gIFx0XHR9LmJpbmQodGhpcyksIHRoaXMucHJvcHMuc3BlZWQgKiAxMDAwKTtcclxuICBcdH0gZWxzZSB7XHJcbiAgXHRcdHRoaXMuX2luaXQoKTtcclxuXHQgIFx0dGhpcy5zZXRTdGF0ZSh7XHJcblx0ICBcdFx0cmF0ZTogblxyXG5cdCAgXHR9KTtcclxuICBcdH1cclxuICB9LFxyXG4gIGluYzogZnVuY3Rpb24obikge1xyXG4gIFx0dmFyIHJhdGUgPSB0aGlzLnN0YXRlLnJhdGU7XHJcbiAgXHRjb25zb2xlLmxvZyhyYXRlKTtcclxuICBcdG4gPSB0aGlzLl9mb3JtYXQobiB8fCB0aGlzLnByb3BzLmluY1N0ZXApO1xyXG4gIFx0aWYodGhpcy5zdGF0ZS5yYXRlICE9PSAxMDAgJiYgcmF0ZSArIG4gPCB0aGlzLnByb3BzLm1heFJhdGUgKiAxMDApIHtcclxuICBcdFx0cmF0ZSArPSBuO1xyXG4gIFx0XHR0aGlzLnNldChyYXRlIC8gMTAwKTtcclxuICBcdFx0dGhpcy5wcm9wcy50cmlja2xlICYmIHRoaXMuX2F1dG9JbmMocmF0ZSk7XHJcbiAgXHR9IGVsc2V7XHJcbiAgXHRcdHJldHVybjtcclxuICBcdH1cclxuICB9LFxyXG4gIGRvbmU6IGZ1bmN0aW9uKCkge1xyXG4gIFx0dGhpcy5zZXQoMSk7XHJcbiAgfSxcclxuICBfZm9ybWF0OiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgXHRpZih0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpe1xyXG4gIFx0XHRyZXR1cm4gZGF0YSAqIDEwMDtcclxuICBcdH0gZWxzZSBpZih0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcclxuICBcdFx0cmV0dXJuIHBhcnNlRmxvYXQoZGF0YSk7XHJcbiAgXHR9XHJcbiAgfSxcclxuICBfYXV0b0luYzogZnVuY3Rpb24ocmF0ZSkge1xyXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYodGhpcy5zdGF0ZS5yYXRlID09PSAxMDApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5pbmMoKE1hdGgucmFuZG9tKCkgKiA1ICsgMSkgLyAxMDApO1xyXG5cdFx0fS5iaW5kKHRoaXMpLCB0aGlzLnByb3BzLnRyaWNrbGVTcGVlZCk7XHJcblx0fSxcclxuXHRfaW5pdDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnNldFN0YXRlKHtcclxuICBcdFx0ZG9uZTogZmFsc2UsXHJcbiAgICBcdGhpZGU6IGZhbHNlXHJcbiAgXHR9KTtcclxuXHR9LFxyXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XHJcbiAgXHR2YXIgYmFyU3R5bGUgPSB7XHJcbiAgXHRcdC8qdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoJyArICh0aGlzLnN0YXRlLnJhdGUgLSAxMDApICsgJyUsIDAsIDApJyxcclxuICBcdFx0V2Via2l0VHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoJyArICh0aGlzLnN0YXRlLnJhdGUgLSAxMDApICsgJyUsIDAsIDApJywqL1xyXG4gIFx0XHR3aWR0aDogdGhpcy5zdGF0ZS5yYXRlICsgJyUnLFxyXG4gIFx0XHR0cmFuc2l0aW9uOiAnd2lkdGggJyArIHRoaXMucHJvcHMuc3BlZWQgKyAncyAnICsgdGhpcy5wcm9wcy5lYXNpbmcgKyAnICxvcGFjaXR5ICcgKyB0aGlzLnByb3BzLnNwZWVkICogMiArICdzICcgKyB0aGlzLnByb3BzLmVhc2luZyAgXHR9O1xyXG4gIFx0dmFyIHByb2dyZXNzU3R5bGUgPSB7XHJcbiAgXHRcdGRpc3BsYXk6IHRoaXMuc3RhdGUuZG9uZSA/ICdub25lJyA6ICdibG9jaycsXHJcbiAgXHRcdHRyYW5zaXRpb246ICdvcGFjaXR5ICcgKyB0aGlzLnByb3BzLnNwZWVkICogMiArICdzICcgKyB0aGlzLnByb3BzLmVhc2luZyxcclxuICBcdFx0b3BhY2l0eTogIXRoaXMuc3RhdGUucmF0ZSB8fCB0aGlzLnN0YXRlLmhpZGUgPyAwIDogMVxyXG4gIFx0fTtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3UtcHJvZ3Jlc3NcIiBzdHlsZT17cHJvZ3Jlc3NTdHlsZX0+XHJcbiAgICAgIFx0PGRpdiBjbGFzc05hbWU9XCJjdS1wcm9ncmVzcy1iYXJcIiBzdHlsZT17YmFyU3R5bGV9PjwvZGl2PlxyXG4gICAgICBcdHt0aGlzLnByb3BzLnNwaW5uZXIgPyA8U3Bpbm5lciAvPiA6IG51bGx9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcbn0pO1xyXG5cclxuIiwiJ3VzZSBzdHJpY3QnXHJcblxyXG52YXIgU3Bpbm5lciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdS1zcGlubmVyXCI+PC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufSk7XHJcblxyXG52YXIgUHJvZ3Jlc3NiYXIgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcblx0Z2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICBcdHJhdGU6IG51bGwsXHJcbiAgICBcdGRvbmU6IGZhbHNlXHJcbiAgICB9O1xyXG4gIH0sXHJcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNwZWVkOiAwLjIsXHJcbiAgICAgIHNwaW5uZXI6IHRydWUsXHJcbiAgICAgIGVhc2luZzogJ2Vhc2UnLFxyXG4gICAgICBtYXhSYXRlOiAwLjk5OTYsXHJcbiAgICAgIGluY1N0ZXA6IDAuMDQsXHJcbiAgICAgIG1pblN0ZXA6IDAuMDIsXHJcbiAgICAgIG1heFN0ZXA6IDAuMDYsXHJcbiAgICAgIHRyaWNrbGU6IHRydWUsXHJcbiAgICAgIHRyaWNrbGVTcGVlZDogODAwLFxyXG4gICAgICBzZXRUcmlja2xlOiBmYWxzZVxyXG4gICAgfTtcclxuICB9LFxyXG4gIHN0YXJ0OiBmdW5jdGlvbigpIHtcclxuICBcdHRoaXMuX2luaXQoKTtcclxuICBcdHRoaXMuc2V0KCcxJScpO1xyXG5cdCAgdGhpcy5wcm9wcy50cmlja2xlICYmIHRoaXMuX2F1dG9JbmMoKTtcclxuICB9LFxyXG4gIHNldDogZnVuY3Rpb24obiwgdHJpY2tsZSkge1xyXG4gIFx0IXRyaWNrbGUgJiYgdGhpcy5faW5pdCgpO1xyXG4gIFx0biA9IHRoaXMuX2Zvcm1hdChuKTtcclxuICBcdGlmKG4gPT09IDEwMCkge1xyXG4gIFx0XHQvKiBkb25lICovXHJcbiAgXHRcdHRoaXMuc2V0U3RhdGUoe1xyXG4gIFx0XHRcdHJhdGU6IDEwMFxyXG4gIFx0XHR9KTtcclxuICBcdH0gZWxzZSB7XHJcbiAgXHRcdG4gPSBuID4gdGhpcy5wcm9wcy5tYXhSYXRlICogMTAwID8gdGhpcy5wcm9wcy5tYXhSYXRlICogMTAwIDogbjtcclxuICBcdFx0dGhpcy5zZXRTdGF0ZSh7XHJcbiAgXHRcdFx0cmF0ZTogblxyXG4gIFx0XHR9KTtcclxuICBcdH1cclxuICB9LFxyXG4gIGluYzogZnVuY3Rpb24obikge1xyXG4gIFx0dGhpcy5faW5pdCgpO1xyXG4gIFx0dGhpcy5wcm9wcy50cmlja2xlICYmIHRoaXMuX2F1dG9JbmMoKTtcclxuICBcdG4gPSBuID8gdGhpcy4gX2Zvcm1hdChuKSA6IHRoaXMucHJvcHMuaW5jU3RlcCAqIDEwMDtcclxuICBcdHZhciBuZXdSYXRlID0gdGhpcy5zdGF0ZS5yYXRlICsgbjtcclxuXHRcdHRoaXMuc2V0KG5ld1JhdGUgKyAnJScsIHRydWUpO1xyXG4gIH0sXHJcbiAgZG9uZTogZnVuY3Rpb24oKSB7XHJcbiAgXHR0aGlzLnNldCgnMTAwJScpO1xyXG4gIFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICBcdFx0dGhpcy5zZXRTdGF0ZSh7XHJcbiAgXHRcdFx0ZG9uZTogdHJ1ZVxyXG4gIFx0XHR9KTtcclxuICBcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHQgIFx0XHR0aGlzLnNldFN0YXRlKHtcclxuXHQgIFx0XHRcdHJhdGU6IG51bGxcclxuXHQgIFx0XHR9KTtcclxuICBcdFx0fS5iaW5kKHRoaXMpLCB0aGlzLnByb3BzLnNwZWVkICogMiAqIDEwMDApO1xyXG4gIFx0fS5iaW5kKHRoaXMpLCB0aGlzLnByb3BzLnNwZWVkICogMTAwMCk7XHJcbiAgfSxcclxuICBfZm9ybWF0OiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgXHRpZih0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpIHtcclxuICBcdFx0cmV0dXJuIGRhdGEgPiAxID8gdGhpcy5wcm9zLm1heFJhdGUgKiAxMDAgOiBkYXRhICogMTAwO1xyXG4gIFx0fSBlbHNlIGlmKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xyXG4gIFx0XHRyZXR1cm4gcGFyc2VGbG9hdChkYXRhKSA+IDEwMCA/IHRoaXMucHJvcHMubWF4UmF0ZSAqIDEwMCA6IHBhcnNlRmxvYXQoZGF0YSk7XHJcbiAgXHR9IGVsc2Uge1xyXG4gIFx0XHRyZXR1cm47XHJcbiAgXHR9XHJcbiAgfSxcclxuICBfaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgXHR0aGlzLnN0YXRlLmRvbmUgJiYgdGhpcy5zZXRTdGF0ZSh7XHJcblx0XHRcdGRvbmU6IGZhbHNlXHJcblx0XHR9KTtcclxuXHRcdHRoaXMudGltZXIgJiYgdGhpcy5fY2xlYXJJbnRlcnZhbCgpO1xyXG4gIH0sXHJcbiAgX2F1dG9JbmM6IGZ1bmN0aW9uKCkge1xyXG4gIFx0dmFyIG5ld1JhdGU7XHJcbiAgXHR2YXIgcmFuZG9tO1xyXG5cdFx0dGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyYW5kb20gPSB0aGlzLl9nZXRSYWRvbVN0ZXAoKTtcclxuXHRcdFx0bmV3UmF0ZSA9IHRoaXMuc3RhdGUucmF0ZSArIHJhbmRvbTtcclxuXHRcdFx0Y29uc29sZS5sb2cocmFuZG9tKTtcclxuXHRcdFx0aWYobmV3UmF0ZSA+IHRoaXMucHJvcHMubWF4UmF0ZSAqIDEwMCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHRoaXMucHJvcHMubWF4UmF0ZSAqIDEwMCk7XHJcblx0XHRcdFx0dGhpcy5fY2xlYXJJbnRlcnZhbCgpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb25zb2xlLmxvZyhuZXdSYXRlKTtcclxuXHRcdFx0dGhpcy5zZXQobmV3UmF0ZSArICclJywgdHJ1ZSk7XHJcblx0XHR9LmJpbmQodGhpcyksIHRoaXMucHJvcHMudHJpY2tsZVNwZWVkKTtcclxuXHR9LFxyXG5cdF9jbGVhckludGVydmFsOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMudGltZXIgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcclxuXHR9LFxyXG5cdF9nZXRSYWRvbVN0ZXA6IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XHJcblx0XHRtaW4gPSBtaW4gfHwgdGhpcy5wcm9wcy5taW5TdGVwICogMTAwO1xyXG5cdFx0bWF4ID0gbWF4IHx8IHRoaXMucHJvcHMubWF4U3RlcCAqIDEwMDtcclxuXHRcdHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XHJcblx0fSxcclxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xyXG4gIFx0dmFyIHByb2dyZXNzU3R5bGUgPSB7XHJcbiAgXHRcdC8vZGlzcGxheTogKCF0aGlzLnN0YXRlLnJhdGUgJiYgdHlwZW9mIHRoaXMuc3RhdGUucmF0ZSA9PT0gJ29iamVjdCcpID8gJ25vbmUnIDogJ2Jsb2NrJyxcclxuICBcdFx0b3BhY2l0eTogdGhpcy5zdGF0ZS5kb25lID8gMCA6IDEsXHJcbiAgXHRcdHRyYW5zaXRpb246ICdvcGFjaXR5ICcgKyB0aGlzLnByb3BzLnNwZWVkICogMiArICdzICcgKyB0aGlzLnByb3BzLmVhc2luZ1xyXG4gIFx0fTtcclxuICAgIHZhciBiYXJTdHlsZSA9IHtcclxuICBcdFx0d2lkdGg6ICF0aGlzLnN0YXRlLnJhdGUgPyAwIDogdGhpcy5zdGF0ZS5yYXRlICsgJyUnLFxyXG4gIFx0XHR0cmFuc2l0aW9uOiAnd2lkdGggJyArIHRoaXMucHJvcHMuc3BlZWQgKyAncyAnICsgdGhpcy5wcm9wcy5lYXNpbmdcclxuXHRcdH07XHJcbiAgXHRyZXR1cm4gdGhpcy5zdGF0ZS5yYXRlID8gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImN1LXByb2dyZXNzXCIgc3R5bGU9e3Byb2dyZXNzU3R5bGV9PlxyXG4gICAgICBcdDxkaXYgY2xhc3NOYW1lPVwiY3UtcHJvZ3Jlc3MtYmFyXCIgc3R5bGU9e2JhclN0eWxlfT48L2Rpdj5cclxuICAgICAgXHR7dGhpcy5wcm9wcy5zcGlubmVyID8gPFNwaW5uZXIgLz4gOiBudWxsfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICkgOiBudWxsO1xyXG4gIH1cclxufSk7XHJcblxyXG4iLCJ2YXIgVG9vbFRpcCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMucHJvcHMucG9zaXRpb24sXG4gICAgICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICBpc09uVGlwOiBmYWxzZSxcbiAgICAgICAgICAgIHRpcEhlaWdodDogXCJcIlxuICAgICAgICB9O1xuICAgIH0sXG4gICAgaGFuZGxlTW91c2VPdmVyOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmKHRoaXMucHJvcHMudHJpZ2dlcj09XCJob3ZlclwiKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0FjdGl2ZTogdHJ1ZX0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVNb3VzZU91dDogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZih0aGlzLnByb3BzLnRyaWdnZXI9PVwiaG92ZXJcIikge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLnN0YXRlLmlzT25UaXApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0FjdGl2ZTogZmFsc2V9KTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSAsIHRoaXMucHJvcHMuZGVsYXkpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVDbGljazogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZih0aGlzLnByb3BzLnRyaWdnZXI9PVwiY2xpY2tcIikge1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQWN0aXZlOiBmYWxzZX0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmKCF0aGlzLnN0YXRlLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNBY3RpdmU6IHRydWV9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgaGFuZGxlVGlwTW91c2VPdmVyOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmKHRoaXMucHJvcHMuaG92ZXJhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc09uVGlwOiB0cnVlfSk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0FjdGl2ZTogdHJ1ZX0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVUaXBNb3VzZU91dDogZnVuY3Rpb24oZSkge1xuICAgICAgICBpZih0aGlzLnByb3BzLmhvdmVyYWJsZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNPblRpcDogZmFsc2V9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQWN0aXZlOiBmYWxzZX0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldFRpcFBvc2l0aW9uKCk7XG4gICAgfSxcbiAgICBzZXRUaXBQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0aXAgPSB0aGlzLnJlZnMudGlwLmdldERPTU5vZGUoKTtcbiAgICAgICAgdmFyIGNvbnQgPSB0aGlzLnJlZnMuY29udC5nZXRET01Ob2RlKCk7XG4gICAgICAgIGlmKCF0aGlzLmZsYWcpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudGlwSGVpZ2h0ID0gdGlwLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuZmxhZyA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpcFdpZHRoID0gdGlwLm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgdGlwSGVpZ2h0ID0gdGlwLm9mZnNldEhlaWdodDtcbiAgICAgICAgdmFyIGNvbnRXaWR0aCA9IGNvbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIHZhciBjb250SGVpZ2h0ID0gY29udC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZS5wb3NpdGlvbikge1xuICAgICAgICAgICAgY2FzZSBcImxlZnRcIjp0aXAuc3R5bGUudG9wID0gLSh0aXBIZWlnaHQtY29udEhlaWdodCkvMitcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXAuc3R5bGUubGVmdCA9IC0odGlwV2lkdGgrMjApK1wicHhcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyaWdodFwiOnRpcC5zdHlsZS50b3AgPSAtKHRpcEhlaWdodC1jb250SGVpZ2h0KS8yK1wicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcC5zdHlsZS5sZWZ0ID0gXCIxMDAlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidG9wXCI6dGlwLnN0eWxlLmxlZnQgPSAtKHRpcFdpZHRoLWNvbnRXaWR0aCkvMitcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXAuc3R5bGUuYm90dG9tID0gXCIxMDAlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYm90dG9tXCI6dGlwLnN0eWxlLmxlZnQgPSAtKHRpcFdpZHRoLWNvbnRXaWR0aCkvMitcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXAuc3R5bGUudG9wID0gXCIxMDAlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICB9XG4gICAgICAgIHRpcC5zdHlsZS5oZWlnaHQgPSB0aGlzLnN0YXRlLnRpcEhlaWdodC0yMCtcInB4XCI7XG4gICAgICAgIHRoaXMucHJldmVydFRpcE92ZXJmbG93KCk7XG4gICAgfSxcbiAgICBwcmV2ZXJ0VGlwT3ZlcmZsb3c6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdGlwWCA9IHRoaXMucmVmcy50aXAuZ2V0RE9NTm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgICAgIHZhciB0aXBZID0gdGhpcy5yZWZzLnRpcC5nZXRET01Ob2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICB2YXIgdGlwV2lkdGggPSB0aGlzLnJlZnMudGlwLmdldERPTU5vZGUoKS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIHRpcEhlaWdodCA9IHRoaXMucmVmcy50aXAuZ2V0RE9NTm9kZSgpLm9mZnNldEhlaWdodDtcbiAgICAgICAgdmFyIGF2YWlsV2lkdGggPSBwYXJzZUludChkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoKTtcbiAgICAgICAgaWYodGlwWCA8IDAgJiYgdGlwWCt0aXBXaWR0aCA+IGF2YWlsV2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRpcFggPCAwKSB7XG4gICAgICAgICAgICBpZih0aGlzLnN0YXRlLnBvc2l0aW9uID09IFwibGVmdFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cG9zaXRpb246IFwidG9wXCJ9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5wb3NpdGlvbiA9PSBcInRvcFwiIHx8IHRoaXMuc3RhdGUucG9zaXRpb24gPT0gXCJib3R0b21cIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3Bvc2l0aW9uOiBcInJpZ2h0XCJ9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKHRpcFgrdGlwV2lkdGggPiBhdmFpbFdpZHRoKSB7XG4gICAgICAgICAgICBpZih0aGlzLnN0YXRlLnBvc2l0aW9uID09IFwicmlnaHRcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3Bvc2l0aW9uOiBcImJvdHRvbVwifSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUucG9zaXRpb24gPT0gXCJib3R0b21cIiB8fCB0aGlzLnN0YXRlLnBvc2l0aW9uID09IFwidG9wXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtwb3NpdGlvbjogXCJsZWZ0XCJ9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9LFxuICAgIGdldFRpcFN0eWxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IHRoaXMuc3RhdGUuaXNBY3RpdmU/XCJibG9ja1wiOlwibm9uZVwiLFxuICAgICAgICAgICAgY29sb3I6IFwicGlua1wiLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMzMzNcIixcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17XCJ0b29sdGlwIFwiK3RoaXMuc3RhdGUucG9zaXRpb259PlxuICAgICAgICAgICAgICAgIDxzcGFuIHJlZj1cImNvbnRcIiBvbk1vdXNlT3Zlcj17dGhpcy5oYW5kbGVNb3VzZU92ZXJ9IG9uTW91c2VPdXQ9e3RoaXMuaGFuZGxlTW91c2VPdXR9IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9Pnt0aGlzLnByb3BzLmNoaWxkcmVufTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8ZGl2IG9uTW91c2VPdmVyPXt0aGlzLmhhbmRsZVRpcE1vdXNlT3Zlcn0gb25Nb3VzZU91dD17dGhpcy5oYW5kbGVUaXBNb3VzZU91dH0gY2xhc3NOYW1lPVwidGlwXCIgcmVmPVwidGlwXCIgc3R5bGU9e3RoaXMuZ2V0VGlwU3R5bGUoKX0+e3RoaXMucHJvcHMudGlwfTwvZGl2PlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9